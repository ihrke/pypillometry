<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Processing monocular and binocular data &#8212; pypillometry  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/nature.css?v=279e0f84" />
    <link rel="stylesheet" type="text/css" href="_static/nbsphinx-code-cells.css?v=2aa19091" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pypillometry  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Processing monocular and binocular data</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="admonition note">
This file was created from the following Jupyter-notebook: <a href="https://github.com/ihrke/pypillometry/tree/master/eyes_and_variables.ipynb">eyes_and_variables.ipynb</a>
<br>
Interactive version:
<a href="https://mybinder.org/v2/gh/ihrke/pypillometry/master?filepath=eyes_and_variables.ipynb"><img alt="Binder badge" src="https://mybinder.org/badge_logo.svg" style="vertical-align:text-bottom"></a>
</div><section id="Processing-monocular-and-binocular-data">
<h1>Processing monocular and binocular data<a class="headerlink" href="#Processing-monocular-and-binocular-data" title="Link to this heading">¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;..&quot;</span><span class="p">)</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pypillometry</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pp</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</pre></div>
</div>
</div>
<p>Data in <code class="docutils literal notranslate"><span class="pre">pypillometry</span></code> can contain different <code class="docutils literal notranslate"><span class="pre">variables</span></code> from different <code class="docutils literal notranslate"><span class="pre">eyes</span></code>. The variables and eyes supported when importing raw data are</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">left_x</span></code>, <code class="docutils literal notranslate"><span class="pre">right_x</span></code> (x-coordinate in screen coordinates from the eyetracker)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">left_y</span></code>, <code class="docutils literal notranslate"><span class="pre">right_y</span></code> (y-coordinate in screen coordinates from the eyetracker)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">left_pupil</span></code>, <code class="docutils literal notranslate"><span class="pre">right_pupil</span></code> (pupil size from left and right eye)</p></li>
</ul>
<p>Depending on which class is chosen (<code class="docutils literal notranslate"><span class="pre">PupilData</span></code>, <code class="docutils literal notranslate"><span class="pre">GazeData</span></code> or <code class="docutils literal notranslate"><span class="pre">EyeData</span></code>), some of these variables are required:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PupilData</span></code>: requires at least one of <code class="docutils literal notranslate"><span class="pre">left_pupil</span></code>, <code class="docutils literal notranslate"><span class="pre">right_pupil</span></code> (or both)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GazeData</span></code>: requires at least one of <code class="docutils literal notranslate"><span class="pre">(left_x,</span> <span class="pre">left_y)</span></code> and/or <code class="docutils literal notranslate"><span class="pre">(right_x,</span> <span class="pre">right_y)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EyeData</span></code>: requires <code class="docutils literal notranslate"><span class="pre">x</span></code>,<code class="docutils literal notranslate"><span class="pre">y</span></code> and <code class="docutils literal notranslate"><span class="pre">pupil</span></code> from at least one eye</p></li>
</ul>
<p>For example, let’s simulate some basic data:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">left_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">right_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">left_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">right_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">left_pupil</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">right_pupil</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>

<span class="c1"># these are all ok</span>
<span class="n">dpupil</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">PupilData</span><span class="p">(</span><span class="n">left_pupil</span><span class="o">=</span><span class="n">left_pupil</span><span class="p">,</span> <span class="n">right_pupil</span><span class="o">=</span><span class="n">right_pupil</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">)</span>
<span class="n">dgaze</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">GazeData</span><span class="p">(</span><span class="n">left_x</span><span class="o">=</span><span class="n">left_x</span><span class="p">,</span> <span class="n">left_y</span><span class="o">=</span><span class="n">left_y</span><span class="p">,</span> <span class="n">right_x</span><span class="o">=</span><span class="n">right_x</span><span class="p">,</span> <span class="n">right_y</span><span class="o">=</span><span class="n">right_y</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">)</span>
<span class="n">deye</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">EyeData</span><span class="p">(</span><span class="n">left_x</span><span class="o">=</span><span class="n">left_x</span><span class="p">,</span> <span class="n">left_y</span><span class="o">=</span><span class="n">left_y</span><span class="p">,</span> <span class="n">left_pupil</span><span class="o">=</span><span class="n">left_pupil</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">)</span>

<span class="c1"># these are not ok</span>
<span class="c1">#pp.PupilData(left_x=left_x, time=time)</span>
<span class="c1">#pp.GazeData(left_x=left_x, time=time)</span>
<span class="n">pp</span><span class="o">.</span><span class="n">EyeData</span><span class="p">(</span><span class="n">left_x</span><span class="o">=</span><span class="n">left_x</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">ValueError</span>                                Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[2], line 17</span>
<span class="ansi-green-intense-fg ansi-bold">     12</span> deye <span style="color: rgb(98,98,98)">=</span> pp<span style="color: rgb(98,98,98)">.</span>EyeData(left_x<span style="color: rgb(98,98,98)">=</span>left_x, left_y<span style="color: rgb(98,98,98)">=</span>left_y, left_pupil<span style="color: rgb(98,98,98)">=</span>left_pupil, time<span style="color: rgb(98,98,98)">=</span>time)
<span class="ansi-green-intense-fg ansi-bold">     14</span> <span style="color: rgb(95,135,135)"># these are not ok</span>
<span class="ansi-green-intense-fg ansi-bold">     15</span> <span style="color: rgb(95,135,135)">#pp.PupilData(left_x=left_x, time=time)</span>
<span class="ansi-green-intense-fg ansi-bold">     16</span> <span style="color: rgb(95,135,135)">#pp.GazeData(left_x=left_x, time=time)</span>
<span class="ansi-green-fg">---&gt; 17</span> pp<span style="color: rgb(98,98,98)">.</span>EyeData(left_x<span style="color: rgb(98,98,98)">=</span>left_x, time<span style="color: rgb(98,98,98)">=</span>time)

File <span class="ansi-green-fg">~/Dropbox/work/projects/pupil/pypillometry/docs/../pypillometry/eyedata/eyedata.py:96</span>, in <span class="ansi-cyan-fg">EyeData.__init__</span><span class="ansi-blue-fg">(self, time, left_x, left_y, left_pupil, right_x, right_y, right_pupil, event_onsets, event_labels, sampling_rate, screen_resolution, physical_screen_size, screen_eye_distance, name, fill_time_discontinuities, keep_orig, notes, inplace, use_cache, cache_dir, max_memory_mb)</span>
<span class="ansi-green-intense-fg ansi-bold">     94</span> logger<span style="color: rgb(98,98,98)">.</span>debug(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">Creating EyeData object</span><span style="color: rgb(175,0,0)">&#34;</span>)
<span class="ansi-green-intense-fg ansi-bold">     95</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> (left_x <span class="ansi-bold" style="color: rgb(175,0,255)">is</span> <span class="ansi-bold" style="color: rgb(0,135,0)">None</span> <span class="ansi-bold" style="color: rgb(175,0,255)">or</span> left_y <span class="ansi-bold" style="color: rgb(175,0,255)">is</span> <span class="ansi-bold" style="color: rgb(0,135,0)">None</span>) <span class="ansi-bold" style="color: rgb(175,0,255)">and</span> (right_x <span class="ansi-bold" style="color: rgb(175,0,255)">is</span> <span class="ansi-bold" style="color: rgb(0,135,0)">None</span> <span class="ansi-bold" style="color: rgb(175,0,255)">or</span> right_y <span class="ansi-bold" style="color: rgb(175,0,255)">is</span> <span class="ansi-bold" style="color: rgb(0,135,0)">None</span>):
<span class="ansi-green-fg">---&gt; 96</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">raise</span> <span class="ansi-bold" style="color: rgb(215,95,95)">ValueError</span>(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">At least one of the eye-traces must be provided (both x and y)</span><span style="color: rgb(175,0,0)">&#34;</span>)
<span class="ansi-green-intense-fg ansi-bold">     97</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>data<span style="color: rgb(98,98,98)">=</span>EyeDataDict(left_x<span style="color: rgb(98,98,98)">=</span>left_x, left_y<span style="color: rgb(98,98,98)">=</span>left_y, left_pupil<span style="color: rgb(98,98,98)">=</span>left_pupil,
<span class="ansi-green-intense-fg ansi-bold">     98</span>                         right_x<span style="color: rgb(98,98,98)">=</span>right_x, right_y<span style="color: rgb(98,98,98)">=</span>right_y, right_pupil<span style="color: rgb(98,98,98)">=</span>right_pupil)
<span class="ansi-green-intense-fg ansi-bold">    100</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>_init_common(time, sampling_rate,
<span class="ansi-green-intense-fg ansi-bold">    101</span>                   event_onsets, event_labels,
<span class="ansi-green-intense-fg ansi-bold">    102</span>                   name, fill_time_discontinuities,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">    105</span>                   cache_dir<span style="color: rgb(98,98,98)">=</span>cache_dir,
<span class="ansi-green-intense-fg ansi-bold">    106</span>                   max_memory_mb<span style="color: rgb(98,98,98)">=</span>max_memory_mb)

<span class="ansi-red-fg">ValueError</span>: At least one of the eye-traces must be provided (both x and y)
</pre></div></div>
</div>
<p>Once the data is loaded, we can check which variables and eyes are available using the <code class="docutils literal notranslate"><span class="pre">.eyes</span></code> and <code class="docutils literal notranslate"><span class="pre">.variables</span></code> attribute:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deye</span><span class="o">.</span><span class="n">eyes</span><span class="p">,</span> <span class="n">deye</span><span class="o">.</span><span class="n">variables</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
([&#39;left&#39;], [&#39;y&#39;, &#39;x&#39;, &#39;pupil&#39;])
</pre></div></div>
</div>
<p>Simply printing an object will also show what data sources are available and give a glimpse into the data structure:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deye</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
EyeData(mohavedi, 55.6KiB):
 n                   : 1000
 sampling_rate       : 1000.0
 data                : [&#39;left_x&#39;, &#39;left_y&#39;, &#39;left_pupil&#39;]
 nevents             : 0
 screen_limits       : not set
 physical_screen_size: not set
 screen_eye_distance : not set
 duration_minutes    : 0.016666666666666666
 start_min           : 0.0
 end_min             : 0.01665
 parameters          : {}
 glimpse             : EyeDataDict(vars=3,n=1000,shape=(1000,)):
  left_x (float64): 0.8876909354995632, 0.16382869242207718, 0.3047045451052535, 0.3712526256462054, -0.671312798889201...
  left_y (float64): 0.4534143924559185, -0.11460988667664473, 0.7994674729621215, -1.265084426172219, 0.777019688126354...
  left_pupil (float64): -1.008303529610942, -1.7674272682382004, -1.3504472492905297, -0.8307784244907553, -0.940278451803245...

 eyes                : [&#39;left&#39;]
 nblinks             : {}
 blinks              : {&#39;left&#39;: None}
 params              : {}
 History:
 *
 └ fill_time_discontinuities()
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">get_example_data</span><span class="p">(</span><span class="s2">&quot;rlmw_002_short&quot;</span><span class="p">)</span>
<span class="n">d</span><span class="o">.</span><span class="n">variables</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">eyes</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
([&#39;y&#39;, &#39;x&#39;, &#39;pupil&#39;], [&#39;left&#39;, &#39;right&#39;])
</pre></div></div>
</div>
<p>Almost all of <code class="docutils literal notranslate"><span class="pre">pypillometry</span></code>’s functions have keyword arguments <code class="docutils literal notranslate"><span class="pre">eyes=</span></code> and <code class="docutils literal notranslate"><span class="pre">variables=</span></code> that specify which eyes/variables to operate on. By default, all of the variables and eyes are processed.</p>
<p>For example, we can run the <code class="docutils literal notranslate"><span class="pre">scale()</span></code> function that will re-scale the data to have mean=0 and standard devation 1. Here, we use the context manager <code class="docutils literal notranslate"><span class="pre">pp.loglevel(&quot;DEBUG&quot;)</span></code> to get output from <code class="docutils literal notranslate"><span class="pre">pypillometry</span></code> internals:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">pp</span><span class="o">.</span><span class="n">loglevel</span><span class="p">(</span><span class="s2">&quot;DEBUG&quot;</span><span class="p">):</span>
    <span class="n">deye</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">eyes</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
<span class="ansi-green-fg">pp: 12:38:57</span> | <span class="ansi-blue-intense-fg ansi-bold">DEBUG   </span> | <span class="ansi-cyan-fg">_get_eye_var</span>:<span class="ansi-cyan-fg">194</span> | <span class="ansi-blue-intense-fg ansi-bold">scale(): eyes=[&#39;left&#39;], vars=[&#39;y&#39;, &#39;x&#39;, &#39;pupil&#39;]</span>
<span class="ansi-green-fg">pp: 12:38:57</span> | <span class="ansi-blue-intense-fg ansi-bold">DEBUG   </span> | <span class="ansi-cyan-fg">scale</span>:<span class="ansi-cyan-fg">820</span> | <span class="ansi-blue-intense-fg ansi-bold">Mean: {&#39;left&#39;: {&#39;y&#39;: 7.105427357601002e-18, &#39;x&#39;: 4.440892098500626e-19, &#39;pupil&#39;: -1.4210854715202004e-17}}</span>
<span class="ansi-green-fg">pp: 12:38:57</span> | <span class="ansi-blue-intense-fg ansi-bold">DEBUG   </span> | <span class="ansi-cyan-fg">scale</span>:<span class="ansi-cyan-fg">821</span> | <span class="ansi-blue-intense-fg ansi-bold">SD: {&#39;left&#39;: {&#39;y&#39;: 1.0, &#39;x&#39;: 1.0, &#39;pupil&#39;: 1.0}}</span>
</pre></div></div>
</div>
<p>The output shows that all variables from the left eye have been processed.</p>
<section id="Which-functions-work-on-which-data?">
<h2>Which functions work on which data?<a class="headerlink" href="#Which-functions-work-on-which-data?" title="Link to this heading">¶</a></h2>
<p>Not all of <code class="docutils literal notranslate"><span class="pre">pypillometry</span></code>s functions can be applied to all variables. Functions that are specific to pupil data have the prefix <code class="docutils literal notranslate"><span class="pre">pupil_*</span></code> and functions that only work on gaze (x/y) data, have the prefix <code class="docutils literal notranslate"><span class="pre">gaze_</span></code>. The other functions will operate on all variables (which may or may not make sense, it is up to you to check!).</p>
</section>
<section id="Creating-new-variables-or-eyes">
<h2>Creating new variables or eyes<a class="headerlink" href="#Creating-new-variables-or-eyes" title="Link to this heading">¶</a></h2>
<p>In some cases, new variables or “eyes” can be created. For example, we might consider to reduce a binocular dataset to one where we average the timeseries from the two eyes. In that case, we can use function <code class="docutils literal notranslate"><span class="pre">merge_eyes()</span></code>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dpupil</span><span class="o">.</span><span class="n">merge_eyes</span><span class="p">(</span><span class="n">eyes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="s2">&quot;right&quot;</span><span class="p">],</span> <span class="n">variables</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;pupil&quot;</span><span class="p">],</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;mean&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PupilData(mikugere, 56.3KiB):
 n               : 1000
 sampling_rate   : 1000.0
 eyes            : [&#39;left&#39;, &#39;mean&#39;, &#39;right&#39;]
 data            : [&#39;left_pupil&#39;, &#39;right_pupil&#39;, &#39;mean_pupil&#39;]
 nevents         : 0
 nblinks         : {}
 blinks          : {&#39;left&#39;: None, &#39;mean&#39;: None, &#39;right&#39;: None}
 duration_minutes: 0.016666666666666666
 start_min       : 0.0
 end_min         : 0.01665
 params          : {}
 glimpse         : EyeDataDict(vars=3,n=1000,shape=(1000,)):
  left_pupil (float64): -1.008303529610942, -1.7674272682382004, -1.3504472492905297, -0.8307784244907553, -0.940278451803245...
  right_pupil (float64): -1.0847455379130668, -0.37366426340867454, 0.008197941206316955, -0.907624569163347, 0.6937086269810662...
  mean_pupil (float64): -1.0465245337620044, -1.0705457658234374, -0.6711246540421064, -0.8692014968270512, -0.12328491241108941...

 History:
 *
 └ fill_time_discontinuities()
  └ merge_eyes(eyes=[&#39;left&#39;, &#39;right&#39;],variables=[&#39;pupil&#39;],method=mean)
</pre></div></div>
</div>
<p>We can see that a new “eye” with variable “pupil” called <code class="docutils literal notranslate"><span class="pre">mean_pupil</span></code> has been created. In this case, the original data <code class="docutils literal notranslate"><span class="pre">left_pupil</span></code> and <code class="docutils literal notranslate"><span class="pre">right_pupil</span></code> have been preserved (this can be changed by using <code class="docutils literal notranslate"><span class="pre">keep_eyes=False</span></code>).</p>
<p>In other cases, the package can create new variables. For example, the function <code class="docutils literal notranslate"><span class="pre">pupil_estimate_baseline()</span></code> will estimate tonic fluctuation in the pupil (see <a class="reference external" href="https://osf.io/preprints/psyarxiv/7ju4a_v2/">https://osf.io/preprints/psyarxiv/7ju4a_v2/</a>) and will create a new variable <code class="docutils literal notranslate"><span class="pre">&lt;eye&gt;_baseline</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">get_example_data</span><span class="p">(</span><span class="s2">&quot;rlmw_002_short&quot;</span><span class="p">)</span>
<span class="n">d</span><span class="o">.</span><span class="n">pupil_estimate_baseline</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
<span class="ansi-green-fg">pp: 12:55:17</span> | <span class="ansi-bold">INFO    </span> | <span class="ansi-cyan-fg">baseline_envelope_iter_bspline</span>:<span class="ansi-cyan-fg">250</span> | <span class="ansi-bold">Optimizing Stan model</span>
12:55:17 - cmdstanpy - INFO - Chain [1] start processing
12:55:17 - cmdstanpy - INFO - Chain [1] done processing
12:55:17 - cmdstanpy - WARNING - The default behavior of CmdStanVB.stan_variable() will change in a future release to return the variational sample, rather than the mean.
To maintain the current behavior, pass the argument mean=True
<span class="ansi-green-fg">pp: 12:55:17</span> | <span class="ansi-bold">INFO    </span> | <span class="ansi-cyan-fg">baseline_envelope_iter_bspline</span>:<span class="ansi-cyan-fg">259</span> | <span class="ansi-bold">Estimating PRF model (NNLS)</span>
<span class="ansi-green-fg">pp: 12:55:17</span> | <span class="ansi-bold">INFO    </span> | <span class="ansi-cyan-fg">baseline_envelope_iter_bspline</span>:<span class="ansi-cyan-fg">291</span> | <span class="ansi-bold">Optimizing 2nd Stan model</span>
12:55:17 - cmdstanpy - INFO - Chain [1] start processing
12:55:17 - cmdstanpy - INFO - Chain [1] done processing
12:55:17 - cmdstanpy - WARNING - The default behavior of CmdStanVB.stan_variable() will change in a future release to return the variational sample, rather than the mean.
To maintain the current behavior, pass the argument mean=True
<span class="ansi-green-fg">pp: 12:55:17</span> | <span class="ansi-bold">INFO    </span> | <span class="ansi-cyan-fg">baseline_envelope_iter_bspline</span>:<span class="ansi-cyan-fg">250</span> | <span class="ansi-bold">Optimizing Stan model</span>
12:55:17 - cmdstanpy - INFO - Chain [1] start processing
12:55:17 - cmdstanpy - INFO - Chain [1] done processing
12:55:17 - cmdstanpy - WARNING - The default behavior of CmdStanVB.stan_variable() will change in a future release to return the variational sample, rather than the mean.
To maintain the current behavior, pass the argument mean=True
<span class="ansi-green-fg">pp: 12:55:17</span> | <span class="ansi-bold">INFO    </span> | <span class="ansi-cyan-fg">baseline_envelope_iter_bspline</span>:<span class="ansi-cyan-fg">259</span> | <span class="ansi-bold">Estimating PRF model (NNLS)</span>
<span class="ansi-green-fg">pp: 12:55:17</span> | <span class="ansi-bold">INFO    </span> | <span class="ansi-cyan-fg">baseline_envelope_iter_bspline</span>:<span class="ansi-cyan-fg">291</span> | <span class="ansi-bold">Optimizing 2nd Stan model</span>
12:55:17 - cmdstanpy - INFO - Chain [1] start processing
12:55:17 - cmdstanpy - INFO - Chain [1] done processing
12:55:17 - cmdstanpy - WARNING - The default behavior of CmdStanVB.stan_variable() will change in a future release to return the variational sample, rather than the mean.
To maintain the current behavior, pass the argument mean=True
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
EyeData(test short, 2.7MiB):
 n                   : 20465
 sampling_rate       : 500.0
 data                : [&#39;left_x&#39;, &#39;left_y&#39;, &#39;left_pupil&#39;, &#39;right_x&#39;, &#39;right_y&#39;, &#39;right_pupil&#39;, &#39;left_baseline&#39;, &#39;right_baseline&#39;]
 nevents             : 40
 screen_limits       : ((0, 1280), (0, 1024))
 physical_screen_size: (30, 20)
 screen_eye_distance : not set
 duration_minutes    : 0.6821666666666667
 start_min           : 0.0
 end_min             : 0.6821333333333333
 parameters          : {}
 glimpse             : EyeDataDict(vars=8,n=20465,shape=(20465,)):
  left_x (float64): 655.6, 655.7, 655.0, 654.5, 655.0...
  left_y (float64): 599.9, 598.9, 597.6, 597.8, 597.8...
  left_pupil (float64): 1121.0, 1122.0, 1124.0, 1126.0, 1126.0...
  right_x (float64): 773.1, 773.8, 774.8, 776.3, 776.7...
  right_y (float64): 594.2, 593.9, 596.5, 597.4, 597.3...
  right_pupil (float64): 949.0, 951.0, 956.0, 959.0, 960.0...
  left_baseline (float64): 997.432053194403, 998.2207124709803, 999.0038298716057, 999.7814195245737, 1000.5534955581763...
  right_baseline (float64): 853.8021043980411, 854.5397452521921, 855.2718689137017, 855.9984895804901, 856.7196214504758...

 eyes                : [&#39;left&#39;, &#39;right&#39;]
 nblinks             : {}
 blinks              : {&#39;left&#39;: None, &#39;right&#39;: None}
 params              : {}
 History:
 *
 └ fill_time_discontinuities()
  └ reset_time()
   └ pupil_estimate_baseline()
</pre></div></div>
</div>
</section>
</section>
<div class="admonition note">
This file was created from the following Jupyter-notebook: <a href="https://github.com/ihrke/pypillometry/tree/master/eyes_and_variables.ipynb">eyes_and_variables.ipynb</a>
<br>
Interactive version:
<a href="https://mybinder.org/v2/gh/ihrke/pypillometry/master?filepath=eyes_and_variables.ipynb"><img alt="Binder badge" src="https://mybinder.org/badge_logo.svg" style="vertical-align:text-bottom"></a>
</div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/pypillometry_logo_200x200.png" alt="Logo of pypillometry"/>
            </a></p>
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Processing monocular and binocular data</a><ul>
<li><a class="reference internal" href="#Which-functions-work-on-which-data?">Which functions work on which data?</a></li>
<li><a class="reference internal" href="#Creating-new-variables-or-eyes">Creating new variables or eyes</a></li>
</ul>
</li>
</ul>

  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/eyes_and_variables.ipynb.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pypillometry  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Processing monocular and binocular data</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2020, Matthias Mittner.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    </div>
  </body>
</html>