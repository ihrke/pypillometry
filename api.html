<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>API documentation &#8212; pypillometry  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/nature.css?v=279e0f84" />
    <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/thebelab.css" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/mermaid@11.12.1/dist/mermaid.esm.min.mjs"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.1.4/dist/mermaid-layout-elk.esm.min.mjs"></script>
    <script type="module">import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.12.1/dist/mermaid.esm.min.mjs";import elkLayouts from "https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.1.4/dist/mermaid-layout-elk.esm.min.mjs";mermaid.registerLayoutLoaders(elkLayouts);mermaid.initialize({startOnLoad:false});</script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
    <script type="module">import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.12.1/dist/mermaid.esm.min.mjs";

const style = document.createElement('style');
style.textContent = `.mermaid-container {
    position: relative !important;
    display: inline-block;
    width: 100%;
}

.mermaid-fullscreen-btn {
    position: absolute !important;
    width: 28px;
    height: 28px;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(0, 0, 0, 0.3);
    border-radius: 4px;
    cursor: pointer;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    font-size: 14px;
    line-height: 1;
    padding: 0;
    color: #333;
}

.mermaid-fullscreen-btn:hover {
    opacity: 100% !important;
    background: rgba(255, 255, 255, 1);
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
    transform: scale(1.1);
}

.mermaid-fullscreen-btn.dark-theme {
    background: rgba(50, 50, 50, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: #e0e0e0;
}

.mermaid-fullscreen-btn.dark-theme:hover {
    background: rgba(60, 60, 60, 1);
    box-shadow: 0 3px 10px rgba(255, 255, 255, 0.2);
}

.mermaid-fullscreen-modal {
    display: none;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw;
    height: 100vh;
    background: rgba(255, 255, 255, 0.98);
    z-index: 9999;
    padding: 20px;
    overflow: auto;
}

.mermaid-fullscreen-modal.dark-theme {
    background: rgba(0, 0, 0, 0.98);
}

.mermaid-fullscreen-modal.active {
    display: flex;
    align-items: center;
    justify-content: center;
}

.mermaid-fullscreen-content {
    position: relative;
    width: 95vw;
    height: 90vh;
    max-width: 95vw;
    max-height: 90vh;
    background: white;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    overflow: auto;
    display: flex;
    align-items: center;
    justify-content: center;
}

.mermaid-fullscreen-content.dark-theme {
    background: #1a1a1a;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
}

.mermaid-fullscreen-content .mermaid {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.mermaid-fullscreen-content .mermaid svg {
    width: 100%;
    height: auto;
    max-width: 100%;
    max-height: 85vh;
    cursor: grab;
}

.mermaid-fullscreen-close {
    position: fixed !important;
    top: 20px !important;
    right: 20px !important;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(0, 0, 0, 0.2);
    border-radius: 50%;
    cursor: pointer;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    transition: all 0.2s;
    font-size: 24px;
    line-height: 1;
    color: #333;
}

.mermaid-fullscreen-close:hover {
    background: white;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
    transform: scale(1.1);
}

.mermaid-fullscreen-close.dark-theme {
    background: rgba(50, 50, 50, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #e0e0e0;
}

.mermaid-fullscreen-close.dark-theme:hover {
    background: rgba(60, 60, 60, 1);
    box-shadow: 0 6px 16px rgba(255, 255, 255, 0.2);
}

.mermaid-fullscreen-modal .mermaid-fullscreen-btn {
    display: none !important;
}
`;
document.head.appendChild(style);

// Detect if page has dark background
const isDarkTheme = () => {
    const bgColor = window.getComputedStyle(document.body).backgroundColor;
    const match = bgColor.match(/rgb\((\d+),\s*(\d+),\s*(\d+)/);
    if (match) {
        const r = parseInt(match[1]);
        const g = parseInt(match[2]);
        const b = parseInt(match[3]);
        const brightness = (r * 299 + g * 587 + b * 114) / 1000;
        return brightness < 128;
    }
    return false;
};

const initFullscreen = async () => {
    await mermaid.run();

    const all_mermaids = document.querySelectorAll(".mermaid");
    const mermaids_processed = document.querySelectorAll(".mermaid[data-processed='true']");

    if(all_mermaids.length !== mermaids_processed.length) {
        // Wait for mermaid to process all diagrams
        setTimeout(initFullscreen, 200);
        return;
    }

    const darkTheme = isDarkTheme();

    const modal = document.createElement('div');
    modal.className = 'mermaid-fullscreen-modal' + (darkTheme ? ' dark-theme' : '');
    modal.setAttribute('role', 'dialog');
    modal.setAttribute('aria-modal', 'true');
    modal.setAttribute('aria-label', 'Fullscreen diagram viewer');
    modal.innerHTML = `
        <button class="mermaid-fullscreen-close${darkTheme ? ' dark-theme' : ''}" aria-label="Close fullscreen">✕</button>
        <div class="mermaid-fullscreen-content${darkTheme ? ' dark-theme' : ''}"></div>
    `;
    document.body.appendChild(modal);

    const modalContent = modal.querySelector('.mermaid-fullscreen-content');
    const closeBtn = modal.querySelector('.mermaid-fullscreen-close');

    const closeModal = () => {
        modal.classList.remove('active');
        modalContent.innerHTML = '';
        document.body.style.overflow = '';
    };

    closeBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
    });
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal.classList.contains('active')) {
            closeModal();
        }
    });

    const allButtons = [];

    document.querySelectorAll('.mermaid').forEach((mermaidDiv) => {
        if (mermaidDiv.parentNode.classList.contains('mermaid-container') ||
            mermaidDiv.closest('.mermaid-fullscreen-modal')) {
            return;
        }

        const container = document.createElement('div');
        container.className = 'mermaid-container';
        mermaidDiv.parentNode.insertBefore(container, mermaidDiv);
        container.appendChild(mermaidDiv);

        const fullscreenBtn = document.createElement('button');
        fullscreenBtn.className = 'mermaid-fullscreen-btn' + (darkTheme ? ' dark-theme' : '');
        fullscreenBtn.setAttribute('aria-label', 'View diagram in fullscreen');
        fullscreenBtn.textContent = '⛶';

        // Calculate dynamic position based on diagram's margin and padding
        const diagramStyle = window.getComputedStyle(mermaidDiv);
        const marginTop = parseFloat(diagramStyle.marginTop) || 0;
        const marginRight = parseFloat(diagramStyle.marginRight) || 0;
        const paddingTop = parseFloat(diagramStyle.paddingTop) || 0;
        const paddingRight = parseFloat(diagramStyle.paddingRight) || 0;
        fullscreenBtn.style.top = `${marginTop + paddingTop + 4}px`;
        fullscreenBtn.style.right = `${marginRight + paddingRight + 4}px`;

        fullscreenBtn.addEventListener('click', () => {
            const clone = mermaidDiv.cloneNode(true);
            modalContent.innerHTML = '';
            modalContent.appendChild(clone);

            const svg = clone.querySelector('svg');
            if (svg) {
                svg.removeAttribute('width');
                svg.removeAttribute('height');
                svg.style.width = '100%';
                svg.style.height = 'auto';
                svg.style.maxWidth = '100%';
                svg.style.display = 'block';
            }

            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        });

        container.appendChild(fullscreenBtn);
        allButtons.push(fullscreenBtn);
    });

    // Update theme classes when theme changes
    const updateTheme = () => {
        const dark = isDarkTheme();
        allButtons.forEach(btn => {
            if (dark) {
                btn.classList.add('dark-theme');
            } else {
                btn.classList.remove('dark-theme');
            }
        });
        if (dark) {
            modal.classList.add('dark-theme');
            modalContent.classList.add('dark-theme');
            closeBtn.classList.add('dark-theme');
        } else {
            modal.classList.remove('dark-theme');
            modalContent.classList.remove('dark-theme');
            closeBtn.classList.remove('dark-theme');
        }
    };

    // Watch for theme changes
    const observer = new MutationObserver(updateTheme);
    observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ['class', 'style', 'data-theme']
    });
    observer.observe(document.body, {
        attributes: true,
        attributeFilter: ['class', 'style']
    });
};

window.addEventListener("load", initFullscreen);
</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Developers" href="dev.html" />
    <link rel="prev" title="Sharing/Importing study data" href="examples/share_study.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dev.html" title="Developers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="examples/share_study.html" title="Sharing/Importing study data"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pypillometry  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">API documentation</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-pypillometry">
<span id="api-documentation"></span><h1>API documentation<a class="headerlink" href="#module-pypillometry" title="Link to this heading">¶</a></h1>
<p>Python-package to help with processing of pupillometric and eyetracking data.</p>
<p>This package provides classes for handling pupillometric and eyetracking data
as well as tools for plotting and analyzing these data.</p>
<section id="unit-handling">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Unit Handling:</a><a class="headerlink" href="#unit-handling" title="Link to this heading">¶</a></h2>
<p>Distance and angle parameters accept three formats:
1. Plain numbers (assumed to be mm for distances, radians for angles - with warning)
2. String format: “600 mm”, “60 cm”, “20 degrees”, “-90 degrees”
3. Pint Quantity: 600 * ureg.mm, 20 * ureg.degree</p>
<p>The unit registry is available as <cite>pypillometry.ureg</cite> for advanced users.</p>
<ul class="simple">
<li><p>Github: <a class="reference external" href="https://github.com/ihrke/pypillometry">https://github.com/ihrke/pypillometry</a></p></li>
<li><p>Documentation: <a class="reference external" href="https://ihrke.github.io/pypillometry">https://ihrke.github.io/pypillometry</a></p></li>
</ul>
</section>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#unit-handling" id="id1">Unit Handling:</a></p></li>
<li><p><a class="reference internal" href="#overview" id="id2">Overview</a></p></li>
<li><p><a class="reference internal" href="#primary-classes" id="id3">Primary classes</a></p>
<ul>
<li><p><a class="reference internal" href="#eyedata" id="id4">EyeData</a></p></li>
<li><p><a class="reference internal" href="#pupildata" id="id5">PupilData</a></p></li>
<li><p><a class="reference internal" href="#gazedata" id="id6">GazeData</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#plotting" id="id7">Plotting</a></p></li>
<li><p><a class="reference internal" href="#supporting-classes" id="id8">Supporting classes</a></p>
<ul>
<li><p><a class="reference internal" href="#genericeyedata" id="id9">GenericEyeData</a></p></li>
<li><p><a class="reference internal" href="#eyedatadict" id="id10">EyeDataDict</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#stateless-signal-processing-functions" id="id11">Stateless signal-processing functions</a></p>
<ul>
<li><p><a class="reference internal" href="#baseline-py" id="id12">baseline.py</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#logging" id="id13">Logging</a></p></li>
<li><p><a class="reference internal" href="#module-pypillometry.io" id="id14">Modules</a></p>
<ul>
<li><p><a class="reference internal" href="#io-py" id="id15">io.py</a></p></li>
<li><p><a class="reference internal" href="#example-data-py" id="id16">example_data.py</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<pre  class="mermaid">
        classDiagram
 EyeData &lt;|-- GazeData
 EyeData &lt;|-- PupilData
 PupilData &lt;|-- GenericEyeData
 GazeData &lt;|-- GenericEyeData

 GazeData: +EyeDataDict data[left_x, left_y, right_x, right_y]
 GazeData: +GazePlotter plot
 GazeData: +set_experiment_info() (and other gaze-specific functions)
 PupilData: +EyeDataDict data[left_pupil, right_pupil]
 PupilData: +PupilPlotter plot
 PupilData: +pupil_blinks_detect() (and other pupil-specific functions)
 EyeData: +EyeDataDict data[left_pupil, right_pupil, left_x, left_y, right_x, right_y]
 EyeData: +EyePlotter plot
 EyeData: +correct_pupil_foreshortening() (and other functions needing both gaze and pupil data)
    </pre><table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.EyeData" title="pypillometry.EyeData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EyeData</span></code></a>([time, left_x, left_y, left_pupil, ...])</p></td>
<td><p>Class for handling eye-tracking data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.PupilData" title="pypillometry.PupilData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PupilData</span></code></a>([time, left_pupil, right_pupil, ...])</p></td>
<td><p>Class representing pupillometric data.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GazeData" title="pypillometry.GazeData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GazeData</span></code></a>([time, left_x, left_y, right_x, ...])</p></td>
<td><p>Class representing Eye-Tracking data (x,y) from one or two eyes.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData" title="pypillometry.GenericEyeData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GenericEyeData</span></code></a>()</p></td>
<td><p>Generic class for eyedata.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.EyeDataDict" title="pypillometry.EyeDataDict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EyeDataDict</span></code></a>(*args, **kwargs)</p></td>
<td><p>A dictionary that contains 1-dimensional ndarrays of equal length and with the same datatype (float).</p></td>
</tr>
</tbody>
</table>
</section>
<section id="primary-classes">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Primary classes</a><a class="headerlink" href="#primary-classes" title="Link to this heading">¶</a></h2>
<p>Several different classes are available for handling
different types of eye data.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#pypillometry.PupilData" title="pypillometry.PupilData"><code class="xref py py-class docutils literal notranslate"><span class="pre">PupilData</span></code></a>: If you have only pupillometric data, use this class.</p></li>
<li><p><a class="reference internal" href="#pypillometry.GazeData" title="pypillometry.GazeData"><code class="xref py py-class docutils literal notranslate"><span class="pre">GazeData</span></code></a>: If you only have gaze data, use this class.</p></li>
<li><p><a class="reference internal" href="#pypillometry.EyeData" title="pypillometry.EyeData"><code class="xref py py-class docutils literal notranslate"><span class="pre">EyeData</span></code></a>: If you have both gaze and pupillometric data, use this class.</p></li>
</ul>
<p>These classes inherit from <a class="reference internal" href="#pypillometry.GenericEyeData" title="pypillometry.GenericEyeData"><code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyeData</span></code></a>, which provides some basic, shared functionality
for handling eye data.</p>
<p>The data inside each of these classes is stored in the <cite>data</cite> attribute, which is a dictionary-like object
of type <a class="reference internal" href="#pypillometry.EyeDataDict" title="pypillometry.EyeDataDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">EyeDataDict</span></code></a>.</p>
<p>Each of these classes provides access to a matching plotter object (from module <code class="xref py py-mod docutils literal notranslate"><span class="pre">pypillometry.plot</span></code>)
that is stored in the <cite>plot</cite> attribute.</p>
<section id="eyedata">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">EyeData</a><a class="headerlink" href="#eyedata" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pypillometry.EyeData">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pypillometry.</span></span><span class="sig-name descname"><span class="pre">EyeData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left_x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left_y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left_pupil</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right_x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right_y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right_pupil</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_onsets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">screen_resolution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">physical_screen_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">screen_eye_distance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">camera_eye_distance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eye_to_eye_distance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calibration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_time_discontinuities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_orig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/eyedata.html#EyeData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.EyeData" title="Link to this definition">¶</a></dt>
<dd><p>Class for handling eye-tracking data. This class is a subclass of GazeData
and inherits all its methods and attributes. In addition to the methods
in GazeData which implement functions for eye-tracking data, <cite>EyeData</cite>
provides methods for handling pupillometric data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – timing array or <cite>None</cite>, in which case the time-array goes from [0,maxT]
using <cite>sampling_rate</cite> (in ms)</p></li>
<li><p><strong>left_x</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – data from left eye (at least one of the eyes must be provided, both x and y)
pupil is optional</p></li>
<li><p><strong>left_y</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – data from left eye (at least one of the eyes must be provided, both x and y)
pupil is optional</p></li>
<li><p><strong>left_pupil</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – data from left eye (at least one of the eyes must be provided, both x and y)
pupil is optional</p></li>
<li><p><strong>right_x</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – data from right eye (at least one of the eyes must be provided, both x and y)
pupil is optional</p></li>
<li><p><strong>right_y</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – data from right eye (at least one of the eyes must be provided, both x and y)
pupil is optional</p></li>
<li><p><strong>right_pupil</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – data from right eye (at least one of the eyes must be provided, both x and y)
pupil is optional</p></li>
<li><p><strong>sampling_rate</strong> (<em>float</em>) – sampling-rate of the pupillary signal in Hz; if None,</p></li>
<li><p><strong>screen_resolution</strong> (<em>tuple</em>) – (xmax, ymax) screen resolution in pixels</p></li>
<li><p><strong>physical_screen_size</strong> (<em>tuple</em>) – (width, height) of the screen in cm; if None, the screen size is not used</p></li>
<li><p><strong>screen_eye_distance</strong> (<em>float</em>) – distance from the screen to the eye in cm</p></li>
<li><p><strong>camera_eye_distance</strong> (<em>float</em>) – distance from the camera to the eye in mm</p></li>
<li><p><strong>eye_to_eye_distance</strong> (<em>float</em>) – distance between the two eyes (inter-pupillary distance) in mm</p></li>
<li><p><strong>name</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>) – name of the dataset or <cite>None</cite> (in which case a random string is selected)</p></li>
<li><p><strong>event_onsets</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – time-onsets of any events in the data (in ms, matched in <cite>time</cite> vector)</p></li>
<li><p><strong>event_labels</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – for each event in <cite>event_onsets</cite>, provide a label</p></li>
<li><p><strong>calibration</strong> (<em>dict</em><em>, </em><em>optional</em>) – Dictionary of SpatialCalibration objects, one per eye (keys: ‘left’, ‘right’)</p></li>
<li><p><strong>keep_orig</strong> (<em>bool</em>) – keep a copy of the original dataset? If <cite>True</cite>, a copy of the object
as initiated in the constructor is stored in member <cite>original</cite></p></li>
<li><p><strong>fill_time_discontinuities</strong> (<em>bool</em>) – sometimes, when the eyetracker loses signal, no entry in the EDF is made;
when this option is True, such entries will be made and the signal set to 0 there
(or do it later using <cite>fill_time_discontinuities()</cite>)</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pypillometry.eyedata</span><span class="w"> </span><span class="kn">import</span> <span class="n">EyeData</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">=</span><span class="n">EyeData</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">left_x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">left_y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Attributes<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">blinks</span></code></dt><dd><p>Return blinks (intervals) for all eyes.</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">camera_eye_distance</span></code></dt><dd><p>Distance from camera to eye (mm).</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">eye_to_eye_distance</span></code></dt><dd><p>Distance between the two eyes (inter-pupillary distance) (mm).</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">eyes</span></code></dt><dd><p>Return a list of available eyes in the dataset.</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">physical_screen_dims</span></code></dt><dd><p>Physical dimensions of screen (mm).</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">physical_screen_height</span></code></dt><dd><p>Physical height of screen (mm).</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">physical_screen_width</span></code></dt><dd><p>Physical width of screen (mm).</p>
</dd>
<dt><strong>plot</strong></dt><dd></dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">screen_eye_distance</span></code></dt><dd><p>Distance from screen to eye (mm).</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">screen_height</span></code></dt><dd><p>Height of the screen (pixels).</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">screen_width</span></code></dt><dd><p>Width of the screen (pixels).</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">screen_xlim</span></code></dt><dd><p>Limits of the screen in x-direction (pixels).</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">screen_ylim</span></code></dt><dd><p>Y-limits of the screen (pixels).</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">variables</span></code></dt><dd><p>Return a list of available variables in the dataset.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_to_history</span></code>(event)</p></td>
<td><p>Add event to history</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_history</span></code>(obj)</p></td>
<td><p>Apply history of operations done on <cite>self</cite> to <cite>obj</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">blink_stats</span></code>([eyes, units])</p></td>
<td><p>Return statistics on blink durations.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">blinks_merge_close</span></code>([eyes, variables, ...])</p></td>
<td><p>Merge blinks that are close together.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy</span></code>([new_name])</p></td>
<td><p>Make and return a deep-copy of the pupil data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.EyeData.correct_pupil_foreshortening" title="pypillometry.EyeData.correct_pupil_foreshortening"><code class="xref py py-obj docutils literal notranslate"><span class="pre">correct_pupil_foreshortening</span></code></a>([eyes, ...])</p></td>
<td><p>Correct pupil data using a simple algorithm to correct for foreshortening effects.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">downsample</span></code>(fsd[, dsfac, inplace])</p></td>
<td><p>Simple downsampling scheme using mean within the downsampling window.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">drop_original</span></code>([inplace])</p></td>
<td><p>Drop original dataset from record (e.g., to save space).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">fill_time_discontinuities</span></code>([yval, print_info])</p></td>
<td><p>find gaps in the time-vector and fill them in (add zeros to the signal)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.EyeData.fit_foreshortening" title="pypillometry.EyeData.fit_foreshortening"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fit_foreshortening</span></code></a>(eye[, r, d, intervals, ...])</p></td>
<td><p>Fit foreshortening correction model to estimate camera geometry and true pupil size.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_eyelink</span></code>(fname[, return_edf_obj, ...])</p></td>
<td><p>Reads a <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code> object from an Eyelink file.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_file</span></code>(fname)</p></td>
<td><p>Reads a <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code> object from a pickle-file.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_blinks</span></code>([eyes, variables, units])</p></td>
<td><p>Get blinks as Intervals object or dict of Intervals.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_duration</span></code>([units])</p></td>
<td><p>Return duration of the dataset in units specified.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_erpd</span></code>(intervals[, eyes, variable, ...])</p></td>
<td><p>Extract event-related pupil dilation (ERPD) from Intervals object.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_events</span></code>([units])</p></td>
<td><p>Get events as an Events object.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_intervals</span></code>(event_select[, interval, ...])</p></td>
<td><p>Return an Intervals object containing intervals relative to event-onsets.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.EyeData.get_pupildata" title="pypillometry.EyeData.get_pupildata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_pupildata</span></code></a>([eye])</p></td>
<td><p>Return the pupil data as a PupilData object.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_size</span></code>()</p></td>
<td><p>Return the size of the object in bytes.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">mask_as_intervals</span></code>([eyes, variables, units, ...])</p></td>
<td><p>Convert masks to Intervals objects.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">mask_eye_divergences</span></code>([threshold, thr_type, ...])</p></td>
<td><p>Calculate Euclidean distance between left and right eye coordinates and detect divergences.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">mask_intervals</span></code>(intervals[, eyes, variables, ...])</p></td>
<td><p>Apply Intervals as masks to selected data.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">mask_offscreen_coords</span></code>([eyes, apply_mask, ...])</p></td>
<td><p>Detect and mask gaze coordinates that fall outside the screen boundaries.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">merge_eyes</span></code>([eyes, variables, method, ...])</p></td>
<td><p>Merge data from both eyes into a single variable.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">merge_masks</span></code>([inplace])</p></td>
<td><p>Merge masks of all variables into a single joint mask.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">nblinks</span></code>([eyes, variables])</p></td>
<td><p>Return number of detected blinks.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">nevents</span></code>()</p></td>
<td><p>Return number of events in data.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">print_history</span></code>()</p></td>
<td><p>Pretty-print the history of the current dataset (which manipulations where done on it).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">pupil_blinks_detect</span></code>([eyes, min_duration, ...])</p></td>
<td><p>Detect blinks in the pupillary signal using several strategies.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">pupil_blinks_interpolate</span></code>([eyes, store_as, ...])</p></td>
<td><p>Interpolating blinks in the pupillary signal.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">pupil_estimate_baseline</span></code>([eyes, variable, ...])</p></td>
<td><p>Apply one of the baseline-estimation methods.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">pupil_estimate_response</span></code>([eyes, npar, tmax, ...])</p></td>
<td><p>Estimate pupil-response based on event-onsets, see <code class="xref py py-func docutils literal notranslate"><span class="pre">pypillometry.pupil.pupil_response()</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">pupil_lowpass_filter</span></code>(cutoff[, order, eyes, ...])</p></td>
<td><p>Lowpass-filter pupil signal using a Butterworth-filter, see <code class="xref py py-func docutils literal notranslate"><span class="pre">baseline.butter_lowpass_filter()</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">pupil_smooth_window</span></code>([eyes, window, winsize, ...])</p></td>
<td><p>Apply smoothing of the signal using a moving window.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset_time</span></code>([t0, inplace])</p></td>
<td><p>Resets time so that the time-array starts at time zero (t0).</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">scale</span></code>([variables, mean, sd, eyes, inplace])</p></td>
<td><p>Scale the signal by subtracting <cite>mean</cite> and dividing by <cite>sd</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_blinks</span></code>(intervals[, eyes, variables, ...])</p></td>
<td><p>Set blinks for specified eyes and variables.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_event_onsets</span></code>(event_onsets, event_labels)</p></td>
<td><p>Set onsets of events in the data</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_events</span></code>(events[, inplace])</p></td>
<td><p>Replace event onsets and labels from an Events object.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_experiment_info</span></code>([screen_eye_distance, ...])</p></td>
<td><p>Set some experimental information for the dataset.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">stat_per_event</span></code>([intervals, interval, ...])</p></td>
<td><p>Return result of applying a statistical function to data in a given interval relative to event-onsets.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">sub_slice</span></code>([start, end, units, inplace])</p></td>
<td><p>Return a new <cite>EyeData</cite> object that is a shortened version of the current one (contains all data between <cite>start</cite> and <cite>end</cite> in units given by <cite>units</cite> (one of &quot;ms&quot;, &quot;sec&quot;, &quot;min&quot;, &quot;h&quot;).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.EyeData.summary" title="pypillometry.EyeData.summary"><code class="xref py py-obj docutils literal notranslate"><span class="pre">summary</span></code></a>()</p></td>
<td><p>Return a summary of the dataset as a dictionary.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">unscale</span></code>([variables, mean, sd, eyes, inplace])</p></td>
<td><p>Scale back to original values using either values provided as arguments or the values stored in <cite>scale_params</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">write_file</span></code>(fname)</p></td>
<td><p>Save to file (using <code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code>).</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.EyeData.correct_pupil_foreshortening">
<span class="sig-name descname"><span class="pre">correct_pupil_foreshortening</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">midpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">store_as</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pupil'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/eyedata.html#EyeData.correct_pupil_foreshortening"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.EyeData.correct_pupil_foreshortening" title="Link to this definition">¶</a></dt>
<dd><p>Correct pupil data using a simple algorithm to correct for foreshortening effects.</p>
<p>Correct the pupil data for foreshortening effects caused
by saccades/eye movements. This method is based on a simple algorithm
described here:</p>
<p><span class="xref std std-ref">Correcting pupillary signal using a simple Foreshortening Algorithm</span></p>
<p>Relevant publication (not the description of the algorithm used here):
<a class="reference external" href="https://link.springer.com/article/10.3758/s13428-015-0588-x">https://link.springer.com/article/10.3758/s13428-015-0588-x</a></p>
<ul class="simple">
<li><p>[ ] TODO: when using interpolated pupil data, x/y data may still be missing. Make sure that the
pupil data is not touched where x/y is missing</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eyes</strong> (<em>list</em>) – Which eyes to correct. If None, correct all available eyes.</p></li>
<li><p><strong>midpoint</strong> (<em>tuple</em>) – The center of the screen (x,y) where it is assumed that the pupil is completely circular.
If None, the midpoint is taken to be the center of the screen as registered
in the EyeData object.</p></li>
<li><p><strong>inplace</strong> (<em>bool</em>) – Whether to modify the object in place or return a new object.
<cite>true</cite>: modify in place
<cite>false</cite>: return a new object
<cite>None</cite>: use the object’s default setting (initialized in __init__)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An EyeData object with the corrected pupil</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pypillometry.EyeData" title="pypillometry.EyeData"><code class="xref py py-class docutils literal notranslate"><span class="pre">EyeData</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.EyeData.fit_foreshortening">
<span class="sig-name descname"><span class="pre">fit_foreshortening</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eye</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intervals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lowpass_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lambda_smooth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">knots_per_second</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_theta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/eyedata.html#EyeData.fit_foreshortening"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.EyeData.fit_foreshortening" title="Link to this definition">¶</a></dt>
<dd><p>Fit foreshortening correction model to estimate camera geometry and true pupil size.</p>
<p>This method implements Stage 1 of the foreshortening correction algorithm,
which jointly estimates the camera position (theta, phi) and the temporal
dynamics of true pupil size A0(t) using B-splines. The data is automatically
preprocessed (filtered and downsampled) before fitting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eye</strong> (<em>str</em>) – Which eye to fit (‘left’ or ‘right’)</p></li>
<li><p><strong>r</strong> (<em>float</em><em>, </em><em>str</em><em>, or </em><em>pint.Quantity</em><em>, </em><em>optional</em>) – Eye-to-camera distance. If not provided, uses the
<cite>camera_eye_distance</cite> attribute of the EyeData object.
- Plain number: assumed to be mm (with warning)
- String: e.g., “600 mm”, “60 cm”
- Quantity: e.g., 600 * ureg.mm</p></li>
<li><p><strong>d</strong> (<em>float</em><em>, </em><em>str</em><em>, or </em><em>pint.Quantity</em><em>, </em><em>optional</em>) – Eye-to-screen distance. If not provided, uses the
<cite>screen_eye_distance</cite> attribute.
- Plain number: assumed to be mm (with warning)
- String: e.g., “700 mm”, “70 cm”
- Quantity: e.g., 700 * ureg.mm</p></li>
<li><p><strong>intervals</strong> (<em>Intervals</em><em>, </em><em>optional</em>) – Time intervals to use for fitting. If None, uses all available data.
Useful for fitting only on calibration periods.</p></li>
<li><p><strong>target_fs</strong> (<em>float</em><em>, </em><em>default 50.0</em>) – Target sampling rate in Hz after downsampling for efficiency.
Pupil dynamics are typically well-preserved at 50 Hz.</p></li>
<li><p><strong>lowpass_freq</strong> (<em>float</em><em>, </em><em>default 4.0</em>) – Lowpass filter cutoff frequency in Hz. Removes high-frequency noise
before downsampling. Should be below target_fs/2 (Nyquist).</p></li>
<li><p><strong>lambda_smooth</strong> (<em>float</em><em>, </em><em>default 1.0</em>) – Smoothness regularization weight. Higher values produce smoother
A0(t) estimates. Tune via cross-validation if needed.</p></li>
<li><p><strong>knots_per_second</strong> (<em>float</em><em>, </em><em>default 1.0</em>) – Number of B-spline knots per second. Controls temporal resolution
of A0(t) model. Typical values: 0.5-2.0.</p></li>
<li><p><strong>initial_theta</strong> (<em>float</em><em>, </em><em>str</em><em>, or </em><em>pint.Quantity</em><em>, </em><em>optional</em>) – Initial guess for camera polar angle. If None, uses
pi/2 (horizontal) as starting point.
- Plain number: assumed to be radians (with warning)
- String: e.g., “20 degrees”, “0.349 radians”
- Quantity: e.g., 20 * ureg.degree</p></li>
<li><p><strong>initial_phi</strong> (<em>float</em><em>, </em><em>str</em><em>, or </em><em>pint.Quantity</em><em>, </em><em>optional</em>) – Initial guess for camera azimuthal angle. If None,
uses 0 (camera on x-axis) as starting point.
- Plain number: assumed to be radians (with warning)
- String: e.g., “-90 degrees”, “-1.57 radians”
- Quantity: e.g., -90 * ureg.degree</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default True</em>) – Print optimization progress and fit statistics.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>calibration</strong> – Fitted calibration object containing camera geometry (theta, phi),
spline coefficients for A0(t), and fit quality metrics.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>ForeshorteningCalibration</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If specified eye doesn’t exist or lacks gaze/pupil data.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<dl class="simple">
<dt>The model is:</dt><dd><p>A_measured(x,y,t) = A0(t) * cos(alpha(x,y; theta, phi))</p>
</dd>
</dl>
<p>where:
- A0(t) = sum_k a_k * B_k(t) is modeled with B-splines
- cos(alpha) is the foreshortening factor depending on viewing angle
- theta, phi parameterize camera position in spherical coordinates</p>
<dl class="simple">
<dt>The optimization minimizes:</dt><dd><p>sum_i (A_i - A_pred_i)^2 + lambda_smooth * sum_k (a_{k+1} - a_k)^2</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pypillometry</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">EyeData</span><span class="o">.</span><span class="n">from_eyelink</span><span class="p">(</span><span class="s1">&#39;recording.edf&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Set experimental parameters (optional but recommended)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">set_experiment_info</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">camera_eye_distance</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>  <span class="c1"># mm</span>
<span class="gp">... </span>    <span class="n">screen_eye_distance</span><span class="o">=</span><span class="mi">70</span>    <span class="c1"># cm</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Fit on calibration period (first 2 minutes)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cal_intervals</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_intervals</span><span class="p">(</span><span class="n">end_time</span><span class="o">=</span><span class="mi">120000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calib</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">fit_foreshortening</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">eye</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">intervals</span><span class="o">=</span><span class="n">cal_intervals</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Or provide r and d explicitly</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calib</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">fit_foreshortening</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">eye</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">r</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>  <span class="c1"># Eye-to-camera distance in mm</span>
<span class="gp">... </span>    <span class="n">d</span><span class="o">=</span><span class="mi">700</span><span class="p">,</span>  <span class="c1"># Eye-to-screen distance in mm</span>
<span class="gp">... </span>    <span class="n">intervals</span><span class="o">=</span><span class="n">cal_intervals</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Inspect fit quality</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">calib</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;R² = </span><span class="si">{</span><span class="n">calib</span><span class="o">.</span><span class="n">fit_metrics</span><span class="p">[</span><span class="s1">&#39;r2&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Compute correction for all data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">correction_factor</span> <span class="o">=</span> <span class="n">calib</span><span class="o">.</span><span class="n">get_correction_factor</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">data</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">data</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corrected_pupil</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;pupil&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">correction_factor</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">ForeshorteningCalibration</span></code></dt><dd><p>Container for fitted parameters</p>
</dd>
<dt><a class="reference internal" href="#pypillometry.EyeData.correct_pupil_foreshortening" title="pypillometry.EyeData.correct_pupil_foreshortening"><code class="xref py py-obj docutils literal notranslate"><span class="pre">correct_pupil_foreshortening</span></code></a></dt><dd><p>Simple foreshortening correction method</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.EyeData.get_pupildata">
<span class="sig-name descname"><span class="pre">get_pupildata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eye</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/eyedata.html#EyeData.get_pupildata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.EyeData.get_pupildata" title="Link to this definition">¶</a></dt>
<dd><p>Return the pupil data as a PupilData object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>eye</strong> (<em>str</em><em>, </em><em>optional</em>) – Which eye to return data for.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A PupilData object containing the pupil data.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pypillometry.PupilData" title="pypillometry.PupilData"><code class="xref py py-class docutils literal notranslate"><span class="pre">PupilData</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.EyeData.summary">
<span class="sig-name descname"><span class="pre">summary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/eyedata.html#EyeData.summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.EyeData.summary" title="Link to this definition">¶</a></dt>
<dd><p>Return a summary of the dataset as a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A dictionary summarizing the dataset.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="pupildata">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">PupilData</a><a class="headerlink" href="#pupildata" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pypillometry.PupilData">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pypillometry.</span></span><span class="sig-name descname"><span class="pre">PupilData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left_pupil</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right_pupil</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_onsets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_time_discontinuities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_orig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/pupildata.html#PupilData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.PupilData" title="Link to this definition">¶</a></dt>
<dd><p>Class representing pupillometric data.</p>
<p>The class is a subclass of <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code> and inherits all its methods.</p>
<p>If eye-tracking data is available in addition to pupillometry, use the <a class="reference internal" href="#pypillometry.EyeData" title="pypillometry.EyeData"><code class="xref py py-class docutils literal notranslate"><span class="pre">EyeData</span></code></a> class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – timing array or <cite>None</cite>, in which case the time-array goes from [0,maxT]
using <cite>sampling_rate</cite> (in ms)</p></li>
<li><p><strong>left_pupil</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – data from left eye (at least one of the eyes must be provided)</p></li>
<li><p><strong>right_pupil</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – data from right eye (at least one of the eyes must be provided)</p></li>
<li><p><strong>sampling_rate</strong> (<em>float</em>) – sampling-rate of the signal in Hz; if None,</p></li>
<li><p><strong>name</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>) – name of the dataset or <cite>None</cite> (in which case a random string is selected)</p></li>
<li><p><strong>event_onsets</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – time-onsets of any events in the data (in ms, matched in <cite>time</cite> vector)</p></li>
<li><p><strong>event_labels</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – for each event in <cite>event_onsets</cite>, provide a label</p></li>
<li><p><strong>keep_orig</strong> (<em>bool</em>) – keep a copy of the original dataset? If <cite>True</cite>, a copy of the object
as initiated in the constructor is stored in member <cite>original</cite></p></li>
<li><p><strong>fill_time_discontinuities</strong> (<em>bool</em>) – sometimes, when the eyetracker loses signal, no entry in the EDF is made;
when this option is True, such entries will be made and the signal set to 0 there
(or do it later using <cite>fill_time_discontinuities()</cite>)</p></li>
<li><p><strong>inplace</strong> (<em>bool</em>) – if True, the object is modified in place; if False, a new object is returned
this object-level property can be overwritten by the method-level <cite>inplace</cite> argument
default is “False”</p></li>
</ul>
</dd>
<dt class="field-even">Attributes<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">blinks</span></code></dt><dd><p>Return blinks (intervals) for all eyes.</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">eyes</span></code></dt><dd><p>Return a list of available eyes in the dataset.</p>
</dd>
<dt><strong>plot</strong></dt><dd></dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">variables</span></code></dt><dd><p>Return a list of available variables in the dataset.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_to_history</span></code>(event)</p></td>
<td><p>Add event to history</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_history</span></code>(obj)</p></td>
<td><p>Apply history of operations done on <cite>self</cite> to <cite>obj</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">blink_stats</span></code>([eyes, units])</p></td>
<td><p>Return statistics on blink durations.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">blinks_merge_close</span></code>([eyes, variables, ...])</p></td>
<td><p>Merge blinks that are close together.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy</span></code>([new_name])</p></td>
<td><p>Make and return a deep-copy of the pupil data.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">downsample</span></code>(fsd[, dsfac, inplace])</p></td>
<td><p>Simple downsampling scheme using mean within the downsampling window.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">drop_original</span></code>([inplace])</p></td>
<td><p>Drop original dataset from record (e.g., to save space).</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">fill_time_discontinuities</span></code>([yval, print_info])</p></td>
<td><p>find gaps in the time-vector and fill them in (add zeros to the signal)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_eyelink</span></code>(fname[, return_edf_obj, ...])</p></td>
<td><p>Reads a <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code> object from an Eyelink file.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_file</span></code>(fname)</p></td>
<td><p>Reads a <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code> object from a pickle-file.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_blinks</span></code>([eyes, variables, units])</p></td>
<td><p>Get blinks as Intervals object or dict of Intervals.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_duration</span></code>([units])</p></td>
<td><p>Return duration of the dataset in units specified.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.PupilData.get_erpd" title="pypillometry.PupilData.get_erpd"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_erpd</span></code></a>(intervals[, eyes, variable, ...])</p></td>
<td><p>Extract event-related pupil dilation (ERPD) from Intervals object.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_events</span></code>([units])</p></td>
<td><p>Get events as an Events object.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_intervals</span></code>(event_select[, interval, ...])</p></td>
<td><p>Return an Intervals object containing intervals relative to event-onsets.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_size</span></code>()</p></td>
<td><p>Return the size of the object in bytes.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">mask_as_intervals</span></code>([eyes, variables, units, ...])</p></td>
<td><p>Convert masks to Intervals objects.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">mask_intervals</span></code>(intervals[, eyes, variables, ...])</p></td>
<td><p>Apply Intervals as masks to selected data.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">merge_eyes</span></code>([eyes, variables, method, ...])</p></td>
<td><p>Merge data from both eyes into a single variable.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">merge_masks</span></code>([inplace])</p></td>
<td><p>Merge masks of all variables into a single joint mask.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">nblinks</span></code>([eyes, variables])</p></td>
<td><p>Return number of detected blinks.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">nevents</span></code>()</p></td>
<td><p>Return number of events in data.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">print_history</span></code>()</p></td>
<td><p>Pretty-print the history of the current dataset (which manipulations where done on it).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.PupilData.pupil_blinks_detect" title="pypillometry.PupilData.pupil_blinks_detect"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pupil_blinks_detect</span></code></a>([eyes, min_duration, ...])</p></td>
<td><p>Detect blinks in the pupillary signal using several strategies.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.PupilData.pupil_blinks_interpolate" title="pypillometry.PupilData.pupil_blinks_interpolate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pupil_blinks_interpolate</span></code></a>([eyes, store_as, ...])</p></td>
<td><p>Interpolating blinks in the pupillary signal.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.PupilData.pupil_estimate_baseline" title="pypillometry.PupilData.pupil_estimate_baseline"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pupil_estimate_baseline</span></code></a>([eyes, variable, ...])</p></td>
<td><p>Apply one of the baseline-estimation methods.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.PupilData.pupil_estimate_response" title="pypillometry.PupilData.pupil_estimate_response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pupil_estimate_response</span></code></a>([eyes, npar, tmax, ...])</p></td>
<td><p>Estimate pupil-response based on event-onsets, see <code class="xref py py-func docutils literal notranslate"><span class="pre">pypillometry.pupil.pupil_response()</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.PupilData.pupil_lowpass_filter" title="pypillometry.PupilData.pupil_lowpass_filter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pupil_lowpass_filter</span></code></a>(cutoff[, order, eyes, ...])</p></td>
<td><p>Lowpass-filter pupil signal using a Butterworth-filter, see <code class="xref py py-func docutils literal notranslate"><span class="pre">baseline.butter_lowpass_filter()</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.PupilData.pupil_smooth_window" title="pypillometry.PupilData.pupil_smooth_window"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pupil_smooth_window</span></code></a>([eyes, window, winsize, ...])</p></td>
<td><p>Apply smoothing of the signal using a moving window.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset_time</span></code>([t0, inplace])</p></td>
<td><p>Resets time so that the time-array starts at time zero (t0).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">scale</span></code>([variables, mean, sd, eyes, inplace])</p></td>
<td><p>Scale the signal by subtracting <cite>mean</cite> and dividing by <cite>sd</cite>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_blinks</span></code>(intervals[, eyes, variables, ...])</p></td>
<td><p>Set blinks for specified eyes and variables.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_event_onsets</span></code>(event_onsets, event_labels)</p></td>
<td><p>Set onsets of events in the data</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_events</span></code>(events[, inplace])</p></td>
<td><p>Replace event onsets and labels from an Events object.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">stat_per_event</span></code>([intervals, interval, ...])</p></td>
<td><p>Return result of applying a statistical function to data in a given interval relative to event-onsets.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">sub_slice</span></code>([start, end, units, inplace])</p></td>
<td><p>Return a new <cite>EyeData</cite> object that is a shortened version of the current one (contains all data between <cite>start</cite> and <cite>end</cite> in units given by <cite>units</cite> (one of &quot;ms&quot;, &quot;sec&quot;, &quot;min&quot;, &quot;h&quot;).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.PupilData.summary" title="pypillometry.PupilData.summary"><code class="xref py py-obj docutils literal notranslate"><span class="pre">summary</span></code></a>()</p></td>
<td><p>Return a summary of the dataset as a dictionary.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">unscale</span></code>([variables, mean, sd, eyes, inplace])</p></td>
<td><p>Scale back to original values using either values provided as arguments or the values stored in <cite>scale_params</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">write_file</span></code>(fname)</p></td>
<td><p>Save to file (using <code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code>).</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.PupilData.get_erpd">
<span class="sig-name descname"><span class="pre">get_erpd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">intervals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pupil'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baseline_win</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/pupildata.html#PupilData.get_erpd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.PupilData.get_erpd" title="Link to this definition">¶</a></dt>
<dd><p>Extract event-related pupil dilation (ERPD) from Intervals object.
No attempt is being made to exclude overlaps of the time-windows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>intervals</strong> (<em>Intervals</em>) – Intervals object containing the time windows to extract (from get_intervals())</p></li>
<li><p><strong>eyes</strong> (<em>list</em><em> or </em><em>str</em>) – str or list of eyes to process; if empty, all available eyes are processed</p></li>
<li><p><strong>variable</strong> (<em>str</em>) – default is to use the “pupil” but it could be used to process, e.g.,
interpolated pupil data stored in a different variables, e.g., “pupilinterp”</p></li>
<li><p><strong>baseline_win</strong> (<em>tuple</em><em> (</em><em>float</em><em>,</em><em>float</em><em>) or </em><em>None</em>) – <p>if None, no baseline-correction is applied
if tuple, the mean value in the window in milliseconds (relative to interval) is</p>
<blockquote>
<div><p>subtracted from the single-trial ERPDs (baseline-correction)</p>
</div></blockquote>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.PupilData.pupil_blinks_detect">
<span class="sig-name descname"><span class="pre">pupil_blinks_detect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_duration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blink_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">winsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">11</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vel_onset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vel_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_onset_len</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_offset_len</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strategies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['zero',</span> <span class="pre">'velocity']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ms'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apply_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/pupildata.html#PupilData.pupil_blinks_detect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.PupilData.pupil_blinks_detect" title="Link to this definition">¶</a></dt>
<dd><p>Detect blinks in the pupillary signal using several strategies.
First, blinks are detected as consecutive sequence of <cite>blink_val</cite>
(f.eks., 0 or NaN). Second, blinks are defined as everything between
two crossings of the velocity profile (from negative to positive).</p>
<p>Detected blinks are always stored internally. When apply_mask=True,
the blinks are also applied as masks to the data. When apply_mask=False,
the detected blinks are returned as Intervals objects.</p>
<p>Finally, detected blinks have to be at least <cite>min_duration</cite> duration (in <cite>units</cite>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eyes</strong> (<em>list</em>) – list of eyes to process; if empty, all available eyes are processed</p></li>
<li><p><strong>min_duration</strong> (<em>float</em>) – minimum duration for a sequence of missing numbers to be treated as blink</p></li>
<li><p><strong>blink_val</strong> (<em>float</em>) – “missing value” code</p></li>
<li><p><strong>winsize</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></span>) – window-size for smoothing for velocity profile (in units)</p></li>
<li><p><strong>vel_onset</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></span>) – negative velocity that needs to be crossed; arbitrary units that depend on
sampling rate etc</p></li>
<li><p><strong>vel_offset</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></span>) – positive velocity that needs to be exceeded; arbitrary units that depend on
sampling rate etc</p></li>
<li><p><strong>min_onset_len</strong> (<em>int</em>) – minimum number of consecutive samples that crossed threshold in the velocity
profile to detect as onset (to avoid noise-induced changes)</p></li>
<li><p><strong>min_offset_len</strong> (<em>int</em>) – minimum number of consecutive samples that crossed threshold in the velocity
profile to detect as offset (to avoid noise-induced changes)</p></li>
<li><p><strong>strategies</strong> (<em>list</em><em> of </em><em>strategies to use</em>) – so far, use a list containing any combination of “zero” and “velocity”</p></li>
<li><p><strong>units</strong> (<em>str</em>) – one of “ms”, “sec”, “min”, “h”</p></li>
<li><p><strong>apply_mask</strong> (<em>bool</em>) – if <cite>True</cite>, apply detected blinks as masks to the data and return self
if <cite>False</cite>, return detected blinks as Intervals (or dict of Intervals)</p></li>
<li><p><strong>inplace</strong> (<em>bool</em>) – if <cite>True</cite>, make change in-place and return the object
if <cite>False</cite>, make and return copy before making changes</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If apply_mask=True: returns self for chaining
If apply_mask=False and single eye: returns Intervals object
If apply_mask=False and multiple eyes: returns dict of Intervals objects</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>self or Intervals or dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.PupilData.pupil_blinks_interpolate">
<span class="sig-name descname"><span class="pre">pupil_blinks_interpolate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">store_as</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pupil'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mahot'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">winsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">11</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vel_onset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vel_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">margin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(10,</span> <span class="pre">30)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blinkwindow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">500</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interp_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cubic'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/pupildata.html#PupilData.pupil_blinks_interpolate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.PupilData.pupil_blinks_interpolate" title="Link to this definition">¶</a></dt>
<dd><p>Interpolating blinks in the pupillary signal.</p>
<p>Implements the blink-interpolation method by Mahot (2013).</p>
<p>Mahot, 2013:
<a class="reference external" href="https://figshare.com/articles/A_simple_way_to_reconstruct_pupil_size_during_eye_blinks/688001">https://figshare.com/articles/A_simple_way_to_reconstruct_pupil_size_during_eye_blinks/688001</a>.</p>
<p>This procedure relies heavily on eye-balling (reconstructing visually convincing signal),
so a “plot” option is provided that will plot many diagnostics (see paper linked above) that
can help to set good parameter values for <cite>winsize</cite>, <cite>vel_onset</cite>, <cite>vel_offset</cite> and <cite>margin</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eyes</strong> (<em>str</em><em> or </em><em>list</em>) – str or list of eyes to process; if empty, all available eyes are processed</p></li>
<li><p><strong>store_as</strong> (<em>str</em>) – how to store the interpolated data; either “pupil” (default) which replaces
the original pupil data or a string that will be used as the new variable
name in the data (e.g., “pupilinterp”)</p></li>
<li><p><strong>method</strong> (<em>str</em>) – method to use; so far, only “mahot” is implemented</p></li>
<li><p><strong>winsize</strong> (<em>float</em>) – size of the Hanning-window in ms</p></li>
<li><p><strong>vel_onset</strong> (<em>float</em>) – velocity-threshold to detect the onset of the blink</p></li>
<li><p><strong>vel_offset</strong> (<em>float</em>) – velocity-threshold to detect the offset of the blink</p></li>
<li><p><strong>margin</strong> (<em>Tuple</em><em>[</em><em>float</em><em>,</em><em>float</em><em>]</em>) – margin that is subtracted/added to onset and offset (in ms)</p></li>
<li><p><strong>blinkwindow</strong> (<em>float</em>) – how much time before and after each blink to include (in ms)</p></li>
<li><p><strong>interp_type</strong> (<em>str</em>) – type of interpolation accepted by <code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.interpolate.interp1d()</span></code></p></li>
<li><p><strong>inplace</strong> (<em>bool</em>) – if <cite>True</cite>, make change in-place and return the object
if <cite>False</cite>, make and return copy before making changes</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.PupilData.pupil_estimate_baseline">
<span class="sig-name descname"><span class="pre">pupil_estimate_baseline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pupil'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'envelope_iter_bspline_2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/pupildata.html#PupilData.pupil_estimate_baseline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.PupilData.pupil_estimate_baseline" title="Link to this definition">¶</a></dt>
<dd><p>Apply one of the baseline-estimation methods.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eyes</strong> (<em>list</em><em> or </em><em>str</em>) – str or list of eyes to process; if empty, all available eyes are processed</p></li>
<li><p><strong>variable</strong> (<em>str</em>) – default is to use the “pupil” but it could be used to process, e.g.,
interpolated pupil data stored in a different variables, e.g., “pupilinterp”</p></li>
<li><p><strong>method</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>) – <dl class="simple">
<dt>“envelope_iter_bspline_1”: <code class="xref py py-func docutils literal notranslate"><span class="pre">pypillometry.baseline.baseline_envelope_iter_bspline()</span></code></dt><dd><p>with one iteration</p>
</dd>
<dt>”envelope_iter_bspline_2”: <code class="xref py py-func docutils literal notranslate"><span class="pre">pypillometry.baseline.baseline_envelope_iter_bspline()</span></code></dt><dd><p>with two iterations</p>
</dd>
</dl>
</p></li>
<li><p><strong>inplace</strong> (<em>bool</em>) – if <cite>True</cite>, make change in-place and return the object
if <cite>False</cite>, make and return copy before making changes</p></li>
<li><p><strong>kwargs</strong> – named arguments passed to the low-level function in <code class="xref py py-mod docutils literal notranslate"><span class="pre">pypillometry.baseline</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>object with baseline estimated (stored in data[“eye_baseline”])</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pypillometry.PupilData" title="pypillometry.PupilData">PupilData</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.PupilData.pupil_estimate_response">
<span class="sig-name descname"><span class="pre">pupil_estimate_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'free'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'free'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bounds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'npar':</span> <span class="pre">(1,</span> <span class="pre">20),</span> <span class="pre">'tmax':</span> <span class="pre">(100,</span> <span class="pre">2000)}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/pupildata.html#PupilData.pupil_estimate_response"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.PupilData.pupil_estimate_response" title="Link to this definition">¶</a></dt>
<dd><p>Estimate pupil-response based on event-onsets, see
<code class="xref py py-func docutils literal notranslate"><span class="pre">pypillometry.pupil.pupil_response()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eyes</strong> (<em>list</em><em> or </em><em>str</em>) – str or list of eyes to process; if empty, all available eyes are processed</p></li>
<li><p><strong>npar</strong> (<em>float</em>) – npar-parameter for the canonical response-function or “free”;
in case of “free”, the function optimizes for this parameter</p></li>
<li><p><strong>tmax</strong> (<em>float</em>) – tmax-parameter for the canonical response-function or “free”;
in case of “free”, the function optimizes for this parameter</p></li>
<li><p><strong>bounds</strong> (<em>dict</em>) – in case that one or both parameters are estimated, give the lower
and upper bounds for the parameters</p></li>
<li><p><strong>inplace</strong> (<em>bool</em>) – if <cite>True</cite>, make change in-place and return the object
if <cite>False</cite>, make and return copy before making changes</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the results of the estimation is stored in members <cite>response</cite>, <cite>response_x</cite> (design matrix)
and <cite>response_pars</cite></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.PupilData.pupil_lowpass_filter">
<span class="sig-name descname"><span class="pre">pupil_lowpass_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cutoff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/pupildata.html#PupilData.pupil_lowpass_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.PupilData.pupil_lowpass_filter" title="Link to this definition">¶</a></dt>
<dd><p>Lowpass-filter pupil signal using a Butterworth-filter,
see <code class="xref py py-func docutils literal notranslate"><span class="pre">baseline.butter_lowpass_filter()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cutoff</strong> (<em>float</em>) – lowpass-filter cutoff</p></li>
<li><p><strong>order</strong> (<em>int</em>) – filter order</p></li>
<li><p><strong>eyes</strong> (<em>list</em>) – list of eyes to filter; if empty, all available eyes are filtered</p></li>
<li><p><strong>inplace</strong> (<em>bool</em>) – if <cite>True</cite>, make change in-place and return the object
if <cite>False</cite>, make and return copy before making changes
if <cite>None</cite>, use the object-level setting</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.PupilData.pupil_smooth_window">
<span class="sig-name descname"><span class="pre">pupil_smooth_window</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'hanning'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">winsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">11</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/pupildata.html#PupilData.pupil_smooth_window"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.PupilData.pupil_smooth_window" title="Link to this definition">¶</a></dt>
<dd><p>Apply smoothing of the signal using a moving window. See <code class="xref py py-func docutils literal notranslate"><span class="pre">baseline.smooth_window()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eyes</strong> (<em>list</em>) – list of eyes to smooth; if empty, all available eyes are smoothed</p></li>
<li><p><strong>window</strong> (<em>str</em>) – <dl class="simple">
<dt>(the type of window from ‘flat’, ‘hanning’, ‘hamming’, ‘bartlett’, ‘blackman’);</dt><dd><p>flat window will produce a moving average smoothing.</p>
</dd>
</dl>
</p></li>
<li><p><strong>winsize</strong> (<em>float</em>) – the length of the window in ms</p></li>
<li><p><strong>inplace</strong> (<em>bool</em>) – if <cite>True</cite>, make change in-place and return the object
if <cite>False</cite>, make and return copy before making changes</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.PupilData.summary">
<span class="sig-name descname"><span class="pre">summary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/pupildata.html#PupilData.summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.PupilData.summary" title="Link to this definition">¶</a></dt>
<dd><p>Return a summary of the dataset as a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>dictionary containing description of dataset</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="gazedata">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">GazeData</a><a class="headerlink" href="#gazedata" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pypillometry.GazeData">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pypillometry.</span></span><span class="sig-name descname"><span class="pre">GazeData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left_x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left_y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right_x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right_y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_onsets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">screen_resolution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">physical_screen_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">screen_eye_distance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calibration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_time_discontinuities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_orig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/gazedata.html#GazeData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GazeData" title="Link to this definition">¶</a></dt>
<dd><p>Class representing Eye-Tracking data (x,y) from one or two eyes.</p>
<p>If you also want to store pupil-size, use the <cite>EyeData</cite> class.
If you only want to store pupil-size, use the <cite>PupilData</cite> class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – timing array or <cite>None</cite>, in which case the time-array goes from [0,maxT]
using <cite>sampling_rate</cite> (in ms)</p></li>
<li><p><strong>left_x</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – data from left eye (at least one of the eyes must be provided, both x and y)</p></li>
<li><p><strong>left_y</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – data from left eye (at least one of the eyes must be provided, both x and y)</p></li>
<li><p><strong>right_x</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – data from right eye (at least one of the eyes must be provided, both x and y)</p></li>
<li><p><strong>right_y</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – data from right eye (at least one of the eyes must be provided, both x and y)</p></li>
<li><p><strong>sampling_rate</strong> (<em>float</em>) – sampling-rate of the signal in Hz; if None,</p></li>
<li><p><strong>screen_resolution</strong> (<em>tuple</em>) – (xmax, ymax) screen resolution in pixels</p></li>
<li><p><strong>physical_screen_size</strong> (<em>tuple</em>) – (width, height) of the screen in cm; if None, the screen size is not used</p></li>
<li><p><strong>screen_eye_distance</strong> (<em>float</em>) – distance from the screen to the eye in cm</p></li>
<li><p><strong>name</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>) – name of the dataset or <cite>None</cite> (in which case a random string is selected)</p></li>
<li><p><strong>event_onsets</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – time-onsets of any events in the data (in ms, matched in <cite>time</cite> vector)</p></li>
<li><p><strong>event_labels</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – for each event in <cite>event_onsets</cite>, provide a label</p></li>
<li><p><strong>calibration</strong> (<em>dict</em><em>, </em><em>optional</em>) – Dictionary of SpatialCalibration objects, one per eye (keys: ‘left’, ‘right’)</p></li>
<li><p><strong>keep_orig</strong> (<em>bool</em>) – keep a copy of the original dataset? If <cite>True</cite>, a copy of the object
as initiated in the constructor is stored in member <cite>original</cite></p></li>
<li><p><strong>fill_time_discontinuities</strong> (<em>bool</em>) – sometimes, when the eyetracker loses signal, no entry in the EDF is made;
when this option is True, such entries will be made and the signal set to 0 there
(or do it later using <cite>fill_time_discontinuities()</cite>)</p></li>
<li><p><strong>inplace</strong> (<em>bool</em>) – if True, the object is modified in place; if False, a new object is returned
this object-level property can be overwritten by the method-level <cite>inplace</cite> argument
default is “False”</p></li>
</ul>
</dd>
<dt class="field-even">Attributes<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">blinks</span></code></dt><dd><p>Return blinks (intervals) for all eyes.</p>
</dd>
<dt><a class="reference internal" href="#pypillometry.GazeData.camera_eye_distance" title="pypillometry.GazeData.camera_eye_distance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">camera_eye_distance</span></code></a></dt><dd><p>Distance from camera to eye (mm).</p>
</dd>
<dt><a class="reference internal" href="#pypillometry.GazeData.eye_to_eye_distance" title="pypillometry.GazeData.eye_to_eye_distance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">eye_to_eye_distance</span></code></a></dt><dd><p>Distance between the two eyes (inter-pupillary distance) (mm).</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">eyes</span></code></dt><dd><p>Return a list of available eyes in the dataset.</p>
</dd>
<dt><a class="reference internal" href="#pypillometry.GazeData.physical_screen_dims" title="pypillometry.GazeData.physical_screen_dims"><code class="xref py py-obj docutils literal notranslate"><span class="pre">physical_screen_dims</span></code></a></dt><dd><p>Physical dimensions of screen (mm).</p>
</dd>
<dt><a class="reference internal" href="#pypillometry.GazeData.physical_screen_height" title="pypillometry.GazeData.physical_screen_height"><code class="xref py py-obj docutils literal notranslate"><span class="pre">physical_screen_height</span></code></a></dt><dd><p>Physical height of screen (mm).</p>
</dd>
<dt><a class="reference internal" href="#pypillometry.GazeData.physical_screen_width" title="pypillometry.GazeData.physical_screen_width"><code class="xref py py-obj docutils literal notranslate"><span class="pre">physical_screen_width</span></code></a></dt><dd><p>Physical width of screen (mm).</p>
</dd>
<dt><strong>plot</strong></dt><dd></dd>
<dt><a class="reference internal" href="#pypillometry.GazeData.screen_eye_distance" title="pypillometry.GazeData.screen_eye_distance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">screen_eye_distance</span></code></a></dt><dd><p>Distance from screen to eye (mm).</p>
</dd>
<dt><a class="reference internal" href="#pypillometry.GazeData.screen_height" title="pypillometry.GazeData.screen_height"><code class="xref py py-obj docutils literal notranslate"><span class="pre">screen_height</span></code></a></dt><dd><p>Height of the screen (pixels).</p>
</dd>
<dt><a class="reference internal" href="#pypillometry.GazeData.screen_width" title="pypillometry.GazeData.screen_width"><code class="xref py py-obj docutils literal notranslate"><span class="pre">screen_width</span></code></a></dt><dd><p>Width of the screen (pixels).</p>
</dd>
<dt><a class="reference internal" href="#pypillometry.GazeData.screen_xlim" title="pypillometry.GazeData.screen_xlim"><code class="xref py py-obj docutils literal notranslate"><span class="pre">screen_xlim</span></code></a></dt><dd><p>Limits of the screen in x-direction (pixels).</p>
</dd>
<dt><a class="reference internal" href="#pypillometry.GazeData.screen_ylim" title="pypillometry.GazeData.screen_ylim"><code class="xref py py-obj docutils literal notranslate"><span class="pre">screen_ylim</span></code></a></dt><dd><p>Y-limits of the screen (pixels).</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">variables</span></code></dt><dd><p>Return a list of available variables in the dataset.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_to_history</span></code>(event)</p></td>
<td><p>Add event to history</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_history</span></code>(obj)</p></td>
<td><p>Apply history of operations done on <cite>self</cite> to <cite>obj</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">blink_stats</span></code>([eyes, units])</p></td>
<td><p>Return statistics on blink durations.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">blinks_merge_close</span></code>([eyes, variables, ...])</p></td>
<td><p>Merge blinks that are close together.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy</span></code>([new_name])</p></td>
<td><p>Make and return a deep-copy of the pupil data.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">downsample</span></code>(fsd[, dsfac, inplace])</p></td>
<td><p>Simple downsampling scheme using mean within the downsampling window.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">drop_original</span></code>([inplace])</p></td>
<td><p>Drop original dataset from record (e.g., to save space).</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">fill_time_discontinuities</span></code>([yval, print_info])</p></td>
<td><p>find gaps in the time-vector and fill them in (add zeros to the signal)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_eyelink</span></code>(fname[, return_edf_obj, ...])</p></td>
<td><p>Reads a <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code> object from an Eyelink file.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_file</span></code>(fname)</p></td>
<td><p>Reads a <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code> object from a pickle-file.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_blinks</span></code>([eyes, variables, units])</p></td>
<td><p>Get blinks as Intervals object or dict of Intervals.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_duration</span></code>([units])</p></td>
<td><p>Return duration of the dataset in units specified.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_events</span></code>([units])</p></td>
<td><p>Get events as an Events object.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_intervals</span></code>(event_select[, interval, ...])</p></td>
<td><p>Return an Intervals object containing intervals relative to event-onsets.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_size</span></code>()</p></td>
<td><p>Return the size of the object in bytes.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">mask_as_intervals</span></code>([eyes, variables, units, ...])</p></td>
<td><p>Convert masks to Intervals objects.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GazeData.mask_eye_divergences" title="pypillometry.GazeData.mask_eye_divergences"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mask_eye_divergences</span></code></a>([threshold, thr_type, ...])</p></td>
<td><p>Calculate Euclidean distance between left and right eye coordinates and detect divergences.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">mask_intervals</span></code>(intervals[, eyes, variables, ...])</p></td>
<td><p>Apply Intervals as masks to selected data.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GazeData.mask_offscreen_coords" title="pypillometry.GazeData.mask_offscreen_coords"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mask_offscreen_coords</span></code></a>([eyes, apply_mask, ...])</p></td>
<td><p>Detect and mask gaze coordinates that fall outside the screen boundaries.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">merge_eyes</span></code>([eyes, variables, method, ...])</p></td>
<td><p>Merge data from both eyes into a single variable.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">merge_masks</span></code>([inplace])</p></td>
<td><p>Merge masks of all variables into a single joint mask.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">nblinks</span></code>([eyes, variables])</p></td>
<td><p>Return number of detected blinks.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">nevents</span></code>()</p></td>
<td><p>Return number of events in data.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">print_history</span></code>()</p></td>
<td><p>Pretty-print the history of the current dataset (which manipulations where done on it).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset_time</span></code>([t0, inplace])</p></td>
<td><p>Resets time so that the time-array starts at time zero (t0).</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">scale</span></code>([variables, mean, sd, eyes, inplace])</p></td>
<td><p>Scale the signal by subtracting <cite>mean</cite> and dividing by <cite>sd</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_blinks</span></code>(intervals[, eyes, variables, ...])</p></td>
<td><p>Set blinks for specified eyes and variables.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_event_onsets</span></code>(event_onsets, event_labels)</p></td>
<td><p>Set onsets of events in the data</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_events</span></code>(events[, inplace])</p></td>
<td><p>Replace event onsets and labels from an Events object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.GazeData.set_experiment_info" title="pypillometry.GazeData.set_experiment_info"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_experiment_info</span></code></a>([screen_eye_distance, ...])</p></td>
<td><p>Set some experimental information for the dataset.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">stat_per_event</span></code>([intervals, interval, ...])</p></td>
<td><p>Return result of applying a statistical function to data in a given interval relative to event-onsets.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">sub_slice</span></code>([start, end, units, inplace])</p></td>
<td><p>Return a new <cite>EyeData</cite> object that is a shortened version of the current one (contains all data between <cite>start</cite> and <cite>end</cite> in units given by <cite>units</cite> (one of &quot;ms&quot;, &quot;sec&quot;, &quot;min&quot;, &quot;h&quot;).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GazeData.summary" title="pypillometry.GazeData.summary"><code class="xref py py-obj docutils literal notranslate"><span class="pre">summary</span></code></a>()</p></td>
<td><p>Return a summary of the dataset as a dictionary.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">unscale</span></code>([variables, mean, sd, eyes, inplace])</p></td>
<td><p>Scale back to original values using either values provided as arguments or the values stored in <cite>scale_params</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">write_file</span></code>(fname)</p></td>
<td><p>Save to file (using <code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code>).</p></td>
</tr>
</tbody>
</table>
<dl class="py property">
<dt class="sig sig-object py" id="pypillometry.GazeData.camera_eye_distance">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">camera_eye_distance</span></span><a class="headerlink" href="#pypillometry.GazeData.camera_eye_distance" title="Link to this definition">¶</a></dt>
<dd><p>Distance from camera to eye (mm).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>distance from camera to eye in mm</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pypillometry.GazeData.eye_to_eye_distance">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">eye_to_eye_distance</span></span><a class="headerlink" href="#pypillometry.GazeData.eye_to_eye_distance" title="Link to this definition">¶</a></dt>
<dd><p>Distance between the two eyes (inter-pupillary distance) (mm).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>inter-pupillary distance in mm</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GazeData.mask_eye_divergences">
<span class="sig-name descname"><span class="pre">mask_eye_divergences</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.99</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thr_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'percentile'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">store_as</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apply_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/gazedata.html#GazeData.mask_eye_divergences"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GazeData.mask_eye_divergences" title="Link to this definition">¶</a></dt>
<dd><p>Calculate Euclidean distance between left and right eye coordinates and detect divergences.</p>
<p>This method computes the distance between corresponding (x,y) coordinates in the left
and right eyes. Points where the distance exceeds a threshold are detected as divergences.
When apply_mask=True, these points are masked. When apply_mask=False, the divergences
are returned as Intervals objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>threshold</strong> (<em>float</em><em>, </em><em>default=.99</em>) – If thr_type is “percentile”: percentile value (0-1) for threshold calculation.
If thr_type is “pixel”: maximum allowed distance in pixels.</p></li>
<li><p><strong>thr_type</strong> (<em>str</em><em>, </em><em>default=&quot;percentile&quot;</em>) – Type of threshold to apply:
- “percentile”: threshold is calculated as the given percentile of the distance distribution
- “pixel”: threshold is the maximum allowed distance in pixels</p></li>
<li><p><strong>store_as</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – Variable name to store the distance timeseries. If None, distance is not stored.</p></li>
<li><p><strong>apply_mask</strong> (<em>bool</em><em>, </em><em>default=True</em>) – If True, apply detected divergences as masks to the data and return self.
If False, return detected divergences as dict of Intervals objects.</p></li>
<li><p><strong>inplace</strong> (<em>bool</em><em> or </em><em>None</em>) – If True, make change in-place and return the object.
If False, make and return copy before making changes.
If None, use the object-level setting.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If apply_mask=True: returns self for chaining.
If apply_mask=False: returns Intervals object containing detected divergence intervals.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pypillometry.GazeData" title="pypillometry.GazeData">GazeData</a> or Intervals</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If both left and right eye data are not available.
If thr_type is not “percentile” or “pixel”.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Mask divergences at 99th percentile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gaze_data</span> <span class="o">=</span> <span class="n">gaze_data</span><span class="o">.</span><span class="n">mask_eye_divergences</span><span class="p">(</span><span class="n">threshold</span><span class="o">=</span><span class="mf">0.99</span><span class="p">,</span> <span class="n">thr_type</span><span class="o">=</span><span class="s2">&quot;percentile&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Detect divergences without masking</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">divergences</span> <span class="o">=</span> <span class="n">gaze_data</span><span class="o">.</span><span class="n">mask_eye_divergences</span><span class="p">(</span><span class="n">threshold</span><span class="o">=</span><span class="mf">0.99</span><span class="p">,</span> <span class="n">apply_mask</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Mask divergences beyond 100 pixels</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gaze_data</span> <span class="o">=</span> <span class="n">gaze_data</span><span class="o">.</span><span class="n">mask_eye_divergences</span><span class="p">(</span><span class="n">threshold</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">thr_type</span><span class="o">=</span><span class="s2">&quot;pixel&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GazeData.mask_offscreen_coords">
<span class="sig-name descname"><span class="pre">mask_offscreen_coords</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apply_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_existing_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/gazedata.html#GazeData.mask_offscreen_coords"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GazeData.mask_offscreen_coords" title="Link to this definition">¶</a></dt>
<dd><p>Detect and mask gaze coordinates that fall outside the screen boundaries.</p>
<p>This method identifies points where the (x,y) coordinates fall outside the
defined screen limits. When apply_mask=True, these points are masked.
When apply_mask=False, the offscreen periods are returned as Intervals objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eyes</strong> (<em>str</em><em> or </em><em>list</em><em>, </em><em>default=</em><em>[</em><em>]</em>) – Eye(s) to check for offscreen coordinates. If empty, checks all available eyes.
Can be a single eye name (e.g., “left”) or a list (e.g., [“left”, “right”]).</p></li>
<li><p><strong>apply_mask</strong> (<em>bool</em><em>, </em><em>default=True</em>) – If True, apply detected offscreen periods as masks to the data and return self.
If False, return detected offscreen periods as dict of Intervals objects.</p></li>
<li><p><strong>ignore_existing_mask</strong> (<em>bool</em><em>, </em><em>default=False</em>) – If False (default), only check non-masked data points for offscreen coordinates.
If True, check all data points including those already masked (e.g., from blinks).</p></li>
<li><p><strong>inplace</strong> (<em>bool</em><em> or </em><em>None</em>) – If True, make change in-place and return the object.
If False, make and return copy before making changes.
If None, use the object-level setting.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If apply_mask=True: returns self for chaining.
If apply_mask=False: returns dict of Intervals objects (one per eye) containing
detected offscreen intervals.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pypillometry.GazeData" title="pypillometry.GazeData">GazeData</a> or dict of Intervals</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Mask offscreen coordinates for all eyes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gaze_data</span> <span class="o">=</span> <span class="n">gaze_data</span><span class="o">.</span><span class="n">mask_offscreen_coords</span><span class="p">()</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Detect offscreen periods without masking</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">offscreen</span> <span class="o">=</span> <span class="n">gaze_data</span><span class="o">.</span><span class="n">mask_offscreen_coords</span><span class="p">(</span><span class="n">apply_mask</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Mask offscreen coordinates for left eye only</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gaze_data</span> <span class="o">=</span> <span class="n">gaze_data</span><span class="o">.</span><span class="n">mask_offscreen_coords</span><span class="p">(</span><span class="n">eyes</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Check all data including already masked points (e.g., during blinks)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gaze_data</span> <span class="o">=</span> <span class="n">gaze_data</span><span class="o">.</span><span class="n">mask_offscreen_coords</span><span class="p">(</span><span class="n">ignore_existing_mask</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pypillometry.GazeData.physical_screen_dims">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">physical_screen_dims</span></span><a class="headerlink" href="#pypillometry.GazeData.physical_screen_dims" title="Link to this definition">¶</a></dt>
<dd><p>Physical dimensions of screen (mm).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>(width, height) of screen in mm</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pypillometry.GazeData.physical_screen_height">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">physical_screen_height</span></span><a class="headerlink" href="#pypillometry.GazeData.physical_screen_height" title="Link to this definition">¶</a></dt>
<dd><p>Physical height of screen (mm).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>height of screen in mm</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pypillometry.GazeData.physical_screen_width">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">physical_screen_width</span></span><a class="headerlink" href="#pypillometry.GazeData.physical_screen_width" title="Link to this definition">¶</a></dt>
<dd><p>Physical width of screen (mm).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>width of screen in mm</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pypillometry.GazeData.screen_eye_distance">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">screen_eye_distance</span></span><a class="headerlink" href="#pypillometry.GazeData.screen_eye_distance" title="Link to this definition">¶</a></dt>
<dd><p>Distance from screen to eye (mm).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>distance from screen to eye in mm</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pypillometry.GazeData.screen_height">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">screen_height</span></span><a class="headerlink" href="#pypillometry.GazeData.screen_height" title="Link to this definition">¶</a></dt>
<dd><p>Height of the screen (pixels).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>ymax-ymin</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pypillometry.GazeData.screen_width">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">screen_width</span></span><a class="headerlink" href="#pypillometry.GazeData.screen_width" title="Link to this definition">¶</a></dt>
<dd><p>Width of the screen (pixels).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>xmax-xmin</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pypillometry.GazeData.screen_xlim">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">screen_xlim</span></span><a class="headerlink" href="#pypillometry.GazeData.screen_xlim" title="Link to this definition">¶</a></dt>
<dd><p>Limits of the screen in x-direction (pixels).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>xmin,xmax of the screen</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pypillometry.GazeData.screen_ylim">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">screen_ylim</span></span><a class="headerlink" href="#pypillometry.GazeData.screen_ylim" title="Link to this definition">¶</a></dt>
<dd><p>Y-limits of the screen (pixels).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>ymin,ymax of the screen</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>typle</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GazeData.set_experiment_info">
<span class="sig-name descname"><span class="pre">set_experiment_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">screen_eye_distance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">screen_resolution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">physical_screen_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">camera_eye_distance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eye_to_eye_distance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/gazedata.html#GazeData.set_experiment_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GazeData.set_experiment_info" title="Link to this definition">¶</a></dt>
<dd><p>Set some experimental information for the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>screen_eye_distance</strong> (<em>float</em><em>, </em><em>str</em><em>, or </em><em>pint.Quantity</em>) – distance from the screen to the eye
- Plain number: assumed to be mm (with warning)
- String: e.g., “70 cm”, “700 mm”
- Quantity: e.g., 70 * ureg.cm</p></li>
<li><p><strong>screen_resolution</strong> (<em>tuple</em>) – (width, height) of the screen in pixels</p></li>
<li><p><strong>physical_screen_size</strong> (<em>tuple</em>) – (width, height) of the screen
Each element can be:
- Plain number: assumed to be mm (with warning)
- String: e.g., “52 cm”, “520 mm”
- Quantity: e.g., 52 * ureg.cm</p></li>
<li><p><strong>camera_eye_distance</strong> (<em>float</em><em>, </em><em>str</em><em>, or </em><em>pint.Quantity</em>) – distance from the camera to the eye
- Plain number: assumed to be mm (with warning)
- String: e.g., “600 mm”, “60 cm”
- Quantity: e.g., 600 * ureg.mm</p></li>
<li><p><strong>eye_to_eye_distance</strong> (<em>float</em><em>, </em><em>str</em><em>, or </em><em>pint.Quantity</em>) – distance between the two eyes (inter-pupillary distance)
- Plain number: assumed to be mm (with warning)
- String: e.g., “65 mm”, “6.5 cm”
- Quantity: e.g., 65 * ureg.mm</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GazeData.summary">
<span class="sig-name descname"><span class="pre">summary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/gazedata.html#GazeData.summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GazeData.summary" title="Link to this definition">¶</a></dt>
<dd><p>Return a summary of the dataset as a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>dictionary containing description of dataset</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="plotting">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Plotting</a><a class="headerlink" href="#plotting" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pypillometry.EyePlotter">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pypillometry.</span></span><span class="sig-name descname"><span class="pre">EyePlotter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/plot/eyeplotter.html#EyePlotter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.EyePlotter" title="Link to this definition">¶</a></dt>
<dd><p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_blinks</span></code>([eyes, variables, pdf_file, ...])</p></td>
<td><p>Plot detected blinks in separate subplots.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_calibration</span></code>([eyes, show_surface, ...])</p></td>
<td><p>Plot spatial calibration data for one or more eyes in subplots.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.EyePlotter.plot_experimental_setup" title="pypillometry.EyePlotter.plot_experimental_setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_experimental_setup</span></code></a>([theta, phi, ...])</p></td>
<td><p>Plot visualization of eye-tracking experimental setup geometry.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_heatmap</span></code>([plot_range, eyes, ...])</p></td>
<td><p>Plot EyeData as a heatmap.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_intervals</span></code>(intervals[, eyes, variables, ...])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_masked</span></code>([eyes, variables, units, merge, ...])</p></td>
<td><p>Plot masked intervals for specified eyes and variables.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.EyePlotter.plot_pupil_foreshortening_error_surface" title="pypillometry.EyePlotter.plot_pupil_foreshortening_error_surface"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_pupil_foreshortening_error_surface</span></code></a>([...])</p></td>
<td><p>Plot a heatmap showing average pupil size across x/y gaze positions.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_scanpath</span></code>([plot_range, eyes, ...])</p></td>
<td><p>Plot EyeData as a scanpath.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_timeseries</span></code>([plot_range, variables, ...])</p></td>
<td><p>Plot a part of the EyeData.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_timeseries_segments</span></code>([pdf_file, interv, ...])</p></td>
<td><p>Plot the whole dataset chunked up into segments (usually to a PDF file).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">pupil_plot</span></code>([eyes, plot_range, plot_events, ...])</p></td>
<td><p>Make a plot of the pupil data using <cite>matplotlib</cite>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">pupil_plot_segments</span></code>([pdf_file, interv, ...])</p></td>
<td><p>Plot the whole dataset chunked up into segments (usually to a PDF file).</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.EyePlotter.plot_experimental_setup">
<span class="sig-name descname"><span class="pre">plot_experimental_setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calibration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_gaze_samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_gaze_samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">viewing_angle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">('-49</span> <span class="pre">deg',</span> <span class="pre">'50</span> <span class="pre">deg',</span> <span class="pre">'45</span> <span class="pre">deg')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">projection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'2d'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/plot/eyeplotter.html#EyePlotter.plot_experimental_setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.EyePlotter.plot_experimental_setup" title="Link to this definition">¶</a></dt>
<dd><p>Plot visualization of eye-tracking experimental setup geometry.</p>
<p>Shows the spatial relationship between eye, camera, and screen using
the experimental parameters stored in the EyeData object. Camera
angles (theta, phi) relative to the eye-screen axis must be provided
explicitly or via a ForeshorteningCalibration object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<em>float</em><em>, </em><em>str</em><em>, or </em><em>pint.Quantity</em><em>, </em><em>optional</em>) – Camera polar angle (from +z axis). Required if
calibration is not provided.
- Plain number: assumed to be radians (with warning)
- String: e.g., “20 degrees”, “0.349 radians”
- Quantity: e.g., 20 * ureg.degree</p></li>
<li><p><strong>phi</strong> (<em>float</em><em>, </em><em>str</em><em>, or </em><em>pint.Quantity</em><em>, </em><em>optional</em>) – Camera azimuthal angle (from +x axis in xy-plane).
Required if calibration is not provided.
- Plain number: assumed to be radians (with warning)
- String: e.g., “-90 degrees”, “-1.57 radians”
- Quantity: e.g., -90 * ureg.degree</p></li>
<li><p><strong>calibration</strong> (<em>ForeshorteningCalibration</em><em>, </em><em>optional</em>) – Fitted calibration object containing theta and phi. If provided,
theta and phi will be extracted from this object (unless explicitly
overridden by theta/phi parameters).</p></li>
<li><p><strong>show_gaze_samples</strong> (<em>bool</em><em>, </em><em>default True</em>) – Show sample gaze vectors to screen positions</p></li>
<li><p><strong>n_gaze_samples</strong> (<em>int</em><em>, </em><em>default 9</em>) – Number of sample gaze positions (3x3 grid)</p></li>
<li><p><strong>ax</strong> (<em>matplotlib 3D axis</em><em>, </em><em>optional</em>) – Existing 3D axis to plot on. If None, creates new figure.</p></li>
<li><p><strong>viewing_angle</strong> (<em>tuple</em><em>, </em><em>optional</em>) – Viewing angle (elev, azim) for 3D projection. Default is (“90 deg”, “-90 deg”).
- Plain number: assumed to be radians (with warning)
- String: e.g., “90 degrees”, “1.57 radians”
- Quantity: e.g., 90 * ureg.degree</p></li>
<li><p><strong>projection</strong> (<em>str</em><em>, </em><em>default '2d'</em>) – Type of projection:
- ‘3d’: Interactive 3D view with rotation
- ‘2d’: Three orthogonal 2D projections (x-y, x-z, y-z planes)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>fig</strong> (<em>matplotlib Figure</em>) – Figure object</p></li>
<li><p><strong>ax</strong> (<em>matplotlib axis or array of axes</em>) – Single 3D axis (if projection=’3d’) or array of 3 2D axes (if projection=’2d’)</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If camera_eye_distance, screen_eye_distance, or physical_screen_size
are not set in the EyeData object, or if theta and phi are not
provided (either explicitly or via calibration parameter).</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Set experimental parameters first</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">set_experiment_info</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">camera_eye_distance</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">screen_eye_distance</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">physical_screen_size</span><span class="o">=</span><span class="p">(</span><span class="mi">52</span><span class="p">,</span> <span class="mi">29</span><span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Specify camera angles explicitly</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_experimental_setup</span><span class="p">(</span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="n">phi</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="o">-</span><span class="mi">90</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Or use fitted camera geometry from foreshortening calibration</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calib</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">fit_foreshortening</span><span class="p">(</span><span class="n">eye</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_experimental_setup</span><span class="p">(</span><span class="n">calibration</span><span class="o">=</span><span class="n">calib</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Compare different angles</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;projection&#39;</span><span class="p">:</span> <span class="s1">&#39;3d&#39;</span><span class="p">},</span>
<span class="gp">... </span>                         <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_experimental_setup</span><span class="p">(</span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="n">phi</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="o">-</span><span class="mi">90</span><span class="p">),</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_experimental_setup</span><span class="p">(</span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">75</span><span class="p">),</span> <span class="n">phi</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># 2D orthogonal projections</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_experimental_setup</span><span class="p">(</span><span class="n">calibration</span><span class="o">=</span><span class="n">calib</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s1">&#39;2d&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.EyePlotter.plot_pupil_foreshortening_error_surface">
<span class="sig-name descname"><span class="pre">plot_pupil_foreshortening_error_surface</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(-inf,</span> <span class="pre">inf)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sec'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_screen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'viridis'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gridsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/plot/eyeplotter.html#EyePlotter.plot_pupil_foreshortening_error_surface"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.EyePlotter.plot_pupil_foreshortening_error_surface" title="Link to this definition">¶</a></dt>
<dd><p>Plot a heatmap showing average pupil size across x/y gaze positions.</p>
<p>This visualizes how pupil size varies across different gaze positions,
which can reveal foreshortening effects (pupils appear smaller when
looking away from the camera) or other spatial artifacts.
Each eye is plotted in a separate subplot.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eyes</strong> (<em>str</em><em> or </em><em>list</em><em>, </em><em>optional</em>) – Which eye(s) to plot: “left”, “right”, “average”, or a list of these.
Default is [] which plots all available eyes.</p></li>
<li><p><strong>plot_range</strong> (<em>tuple</em><em>, </em><em>optional</em>) – The time range to include in the analysis. Default is (-np.inf, +np.inf),
i.e. all data.</p></li>
<li><p><strong>units</strong> (<em>str</em><em>, </em><em>optional</em>) – Time units for plot_range. Default is “sec”.</p></li>
<li><p><strong>show_screen</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to plot the screen limits. Default is True.</p></li>
<li><p><strong>cmap</strong> (<em>str</em><em>, </em><em>optional</em>) – Colormap to use. Default is “viridis”.</p></li>
<li><p><strong>gridsize</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of hexagonal bins in each direction. Default is 30.</p></li>
<li><p><strong>vmin</strong> (<em>float</em><em>, </em><em>optional</em>) – Minimum value for color scale. If None, uses data minimum.</p></li>
<li><p><strong>vmax</strong> (<em>float</em><em>, </em><em>optional</em>) – Maximum value for color scale. If None, uses data maximum.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Creates a matplotlib figure with the heatmap(s)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Plot foreshortening effect for left eye:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_pupil_foreshortening_error_surface</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Plot for multiple eyes:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_pupil_foreshortening_error_surface</span><span class="p">([</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Plot all available eyes with custom color range:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_pupil_foreshortening_error_surface</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pypillometry.PupilPlotter">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pypillometry.</span></span><span class="sig-name descname"><span class="pre">PupilPlotter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/plot/pupilplotter.html#PupilPlotter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.PupilPlotter" title="Link to this definition">¶</a></dt>
<dd><p>Class for plotting pupil data. The class is initialized with a GenericEyeData object
and provides methods to plot the data in various ways.</p>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.PupilPlotter.plot_blinks" title="pypillometry.PupilPlotter.plot_blinks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_blinks</span></code></a>([eyes, variables, pdf_file, ...])</p></td>
<td><p>Plot detected blinks in separate subplots.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_intervals</span></code>(intervals[, eyes, variables, ...])</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_masked</span></code>([eyes, variables, units, merge, ...])</p></td>
<td><p>Plot masked intervals for specified eyes and variables.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_timeseries</span></code>([plot_range, variables, ...])</p></td>
<td><p>Plot a part of the EyeData.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_timeseries_segments</span></code>([pdf_file, interv, ...])</p></td>
<td><p>Plot the whole dataset chunked up into segments (usually to a PDF file).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.PupilPlotter.pupil_plot" title="pypillometry.PupilPlotter.pupil_plot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pupil_plot</span></code></a>([eyes, plot_range, plot_events, ...])</p></td>
<td><p>Make a plot of the pupil data using <cite>matplotlib</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.PupilPlotter.pupil_plot_segments" title="pypillometry.PupilPlotter.pupil_plot_segments"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pupil_plot_segments</span></code></a>([pdf_file, interv, ...])</p></td>
<td><p>Plot the whole dataset chunked up into segments (usually to a PDF file).</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.PupilPlotter.plot_blinks">
<span class="sig-name descname"><span class="pre">plot_blinks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pupil'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pdf_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nrow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ncol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(10,</span> <span class="pre">10)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pre_blink</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">post_blink</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ms'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/plot/pupilplotter.html#PupilPlotter.plot_blinks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.PupilPlotter.plot_blinks" title="Link to this definition">¶</a></dt>
<dd><p>Plot detected blinks in separate subplots.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eyes</strong> (<em>str</em><em> or </em><em>list</em>) – Eyes to plot</p></li>
<li><p><strong>variables</strong> (<em>str</em><em> or </em><em>list</em>) – Variables to plot</p></li>
<li><p><strong>pdf_file</strong> (<em>str</em><em> or </em><em>None</em>) – Save to PDF file if provided</p></li>
<li><p><strong>nrow</strong> (<em>int</em>) – Number of rows per figure</p></li>
<li><p><strong>ncol</strong> (<em>int</em>) – Number of columns per figure</p></li>
<li><p><strong>figsize</strong> (<em>tuple</em>) – Figure size (width, height)</p></li>
<li><p><strong>pre_blink</strong> (<em>float</em>) – Time before blink to include (in ms)</p></li>
<li><p><strong>post_blink</strong> (<em>float</em>) – Time after blink to include (in ms)</p></li>
<li><p><strong>units</strong> (<em>str</em>) – Display units for time axis</p></li>
<li><p><strong>plot_index</strong> (<em>bool</em>) – Show blink index numbers</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of matplotlib Figure objects</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.PupilPlotter.pupil_plot">
<span class="sig-name descname"><span class="pre">pupil_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(-inf,</span> <span class="pre">inf)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">highlight_blinks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sec'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/plot/pupilplotter.html#PupilPlotter.pupil_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.PupilPlotter.pupil_plot" title="Link to this definition">¶</a></dt>
<dd><p>Make a plot of the pupil data using <cite>matplotlib</cite>.</p>
<p>Has pupil-specific options which makes it different from
<code class="xref py py-func docutils literal notranslate"><span class="pre">GazePlotter.plot_timeseries()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eyes</strong> (<em>list</em>) – list of eyes to plot; if empty, all available eyes are plotted</p></li>
<li><p><strong>plot_range</strong> (<em>tuple</em><em> (</em><em>start</em><em>,</em><em>end</em><em>)</em>) – plot from start to end (in units of <cite>units</cite>)</p></li>
<li><p><strong>units</strong> (<em>str</em>) – one of “sec”=seconds, “ms”=millisec, “min”=minutes, “h”=hours</p></li>
<li><p><strong>plot_events</strong> (<em>bool</em>) – plot events as vertical lines with labels</p></li>
<li><p><strong>highlight_blinks</strong> (<em>bool</em>) – highlight detected blinks</p></li>
<li><p><strong>label_prefix</strong> (<em>str</em>) – Prefix to add to labels in the legend. Useful for overlaying multiple datasets.
Default is “” (no prefix).</p></li>
<li><p><strong>style</strong> (<em>dict</em><em> or </em><em>dict</em><em> of </em><em>dicts</em>) – Styling for plotted lines. Can be:
- Single dict: Applied to all eyes with automatic differentiation (e.g., {‘color’: ‘red’})
- Dict of dicts: Per-eye styling (e.g., {‘left’: {‘linestyle’: ‘-‘}, ‘right’: {‘linestyle’: ‘–‘}})
Default is None (uses matplotlib defaults with automatic per-eye colors and linestyles).</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.PupilPlotter.pupil_plot_segments">
<span class="sig-name descname"><span class="pre">pupil_plot_segments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pdf_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(15,</span> <span class="pre">5)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'min'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/plot/pupilplotter.html#PupilPlotter.pupil_plot_segments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.PupilPlotter.pupil_plot_segments" title="Link to this definition">¶</a></dt>
<dd><p>Plot the whole dataset chunked up into segments (usually to a PDF file).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pdf_file</strong> (<em>str</em><em> or </em><em>None</em>) – file name to store the PDF; if None, no PDF is written</p></li>
<li><p><strong>interv</strong> (<em>float</em>) – duration of each of the segments to be plotted (in units specified by <code class="docutils literal notranslate"><span class="pre">units</span></code>)</p></li>
<li><p><strong>figsize</strong> (<em>Tuple</em><em>[</em><em>int</em><em>,</em><em>int</em><em>]</em>) – dimensions of the figures</p></li>
<li><p><strong>units</strong> (<em>str</em><em>, </em><em>optional</em>) – Time units for segment boundaries passed to <code class="xref py py-func docutils literal notranslate"><span class="pre">PupilData.pupil_plot()</span></code>. Default “min”.</p></li>
<li><p><strong>kwargs</strong> – arguments passed to <code class="xref py py-func docutils literal notranslate"><span class="pre">PupilData.pupil_plot()</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li></li>
<li><p><strong>figs</strong> (list of <code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.Figure</span></code> objects)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pypillometry.GazePlotter">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pypillometry.</span></span><span class="sig-name descname"><span class="pre">GazePlotter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/plot/gazeplotter.html#GazePlotter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GazePlotter" title="Link to this definition">¶</a></dt>
<dd><p>Class for plotting eye data. The class is initialized with an EyeData object
and provides methods to plot the data in various ways.</p>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GazePlotter.plot_calibration" title="pypillometry.GazePlotter.plot_calibration"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_calibration</span></code></a>([eyes, show_surface, ...])</p></td>
<td><p>Plot spatial calibration data for one or more eyes in subplots.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.GazePlotter.plot_heatmap" title="pypillometry.GazePlotter.plot_heatmap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_heatmap</span></code></a>([plot_range, eyes, ...])</p></td>
<td><p>Plot EyeData as a heatmap.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_intervals</span></code>(intervals[, eyes, variables, ...])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_masked</span></code>([eyes, variables, units, merge, ...])</p></td>
<td><p>Plot masked intervals for specified eyes and variables.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GazePlotter.plot_scanpath" title="pypillometry.GazePlotter.plot_scanpath"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_scanpath</span></code></a>([plot_range, eyes, ...])</p></td>
<td><p>Plot EyeData as a scanpath.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_timeseries</span></code>([plot_range, variables, ...])</p></td>
<td><p>Plot a part of the EyeData.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_timeseries_segments</span></code>([pdf_file, interv, ...])</p></td>
<td><p>Plot the whole dataset chunked up into segments (usually to a PDF file).</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GazePlotter.plot_calibration">
<span class="sig-name descname"><span class="pre">plot_calibration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_surface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rbf'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(10,</span> <span class="pre">8)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/plot/gazeplotter.html#GazePlotter.plot_calibration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GazePlotter.plot_calibration" title="Link to this definition">¶</a></dt>
<dd><p>Plot spatial calibration data for one or more eyes in subplots.</p>
<p>Creates a figure with subplots for each eye and calls the plot() method
on each SpatialCalibration object to show calibration accuracy with
target points (black X), measured points (dark blue +), and optional
interpolated error surface.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eyes</strong> (<em>str</em><em>, </em><em>list</em><em>, or </em><em>None</em><em>, </em><em>default None</em>) – Which eye(s) to plot. If None or empty list, plots all available eyes.
Can be a single eye name (e.g., ‘left’) or list of eye names (e.g., [‘left’, ‘right’]).</p></li>
<li><p><strong>show_surface</strong> (<em>bool</em><em>, </em><em>default True</em>) – If True, show interpolated error surface as background.
If False, show only the calibration points.</p></li>
<li><p><strong>interpolation</strong> (<em>str</em><em>, </em><em>default 'rbf'</em>) – Interpolation method for surface (only used if show_surface=True).
Options: ‘rbf’, ‘linear’, ‘cubic’, ‘nearest’</p></li>
<li><p><strong>figsize</strong> (<em>tuple</em><em>, </em><em>default</em><em> (</em><em>10</em><em>, </em><em>8</em><em>)</em>) – Figure size per subplot (width, height) in inches.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>fig</strong> (<em>matplotlib.figure.Figure</em>) – The figure object</p></li>
<li><p><strong>axes</strong> (<em>list or matplotlib.axes.Axes</em>) – List of axis objects (or single axis if only one eye)</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If no calibration data is available</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pypillometry</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">EyeData</span><span class="o">.</span><span class="n">from_eyelink</span><span class="p">(</span><span class="s1">&#39;data.edf&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Plot all eyes with surface</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_calibration</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Plot only left eye without surface</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_calibration</span><span class="p">(</span><span class="n">eyes</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">show_surface</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Plot specific eyes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_calibration</span><span class="p">(</span><span class="n">eyes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GazePlotter.plot_heatmap">
<span class="sig-name descname"><span class="pre">plot_heatmap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plot_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(-inf,</span> <span class="pre">inf)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_screen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_masked</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rois</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sec'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(10,</span> <span class="pre">10)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'jet'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gridsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/plot/gazeplotter.html#GazePlotter.plot_heatmap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GazePlotter.plot_heatmap" title="Link to this definition">¶</a></dt>
<dd><p>Plot EyeData as a heatmap. Typically used for a large amount of data
to spot the most frequent locations.
To plot a scanpath, use <a class="reference internal" href="#pypillometry.GazePlotter.plot_scanpath" title="pypillometry.GazePlotter.plot_scanpath"><code class="xref py py-meth docutils literal notranslate"><span class="pre">plot_scanpath()</span></code></a> instead.
Each eye is plotted in a separate subplot.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GazePlotter.plot_scanpath">
<span class="sig-name descname"><span class="pre">plot_scanpath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plot_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(-inf,</span> <span class="pre">inf)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_screen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rois</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_onsets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(10,</span> <span class="pre">10)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/plot/gazeplotter.html#GazePlotter.plot_scanpath"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GazePlotter.plot_scanpath" title="Link to this definition">¶</a></dt>
<dd><p>Plot EyeData as a scanpath. Typically used for single trials
or another small amount of data. To plot a larger amount of data,
use <a class="reference internal" href="#pypillometry.GazePlotter.plot_heatmap" title="pypillometry.GazePlotter.plot_heatmap"><code class="xref py py-meth docutils literal notranslate"><span class="pre">plot_heatmap()</span></code></a> instead.</p>
<p>If several eyes are available, they are plotted in the same figure
in different colors. You can choose between them using the <cite>plot_eyes</cite>
parameter.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="supporting-classes">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Supporting classes</a><a class="headerlink" href="#supporting-classes" title="Link to this heading">¶</a></h2>
<p>These classes are used internally by the main classes will only rarely be used directly by the user.</p>
<section id="genericeyedata">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">GenericEyeData</a><a class="headerlink" href="#genericeyedata" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pypillometry.</span></span><span class="sig-name descname"><span class="pre">GenericEyeData</span></span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData" title="Link to this definition">¶</a></dt>
<dd><p>Generic class for eyedata.
Defines the basic structure of an eyedata object and
implements some basic functions.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference internal" href="#pypillometry.GenericEyeData.blinks" title="pypillometry.GenericEyeData.blinks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">blinks</span></code></a></dt><dd><p>Return blinks (intervals) for all eyes.</p>
</dd>
<dt><a class="reference internal" href="#pypillometry.GenericEyeData.eyes" title="pypillometry.GenericEyeData.eyes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">eyes</span></code></a></dt><dd><p>Return a list of available eyes in the dataset.</p>
</dd>
<dt><a class="reference internal" href="#pypillometry.GenericEyeData.variables" title="pypillometry.GenericEyeData.variables"><code class="xref py py-obj docutils literal notranslate"><span class="pre">variables</span></code></a></dt><dd><p>Return a list of available variables in the dataset.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.add_to_history" title="pypillometry.GenericEyeData.add_to_history"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_to_history</span></code></a>(event)</p></td>
<td><p>Add event to history</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.apply_history" title="pypillometry.GenericEyeData.apply_history"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_history</span></code></a>(obj)</p></td>
<td><p>Apply history of operations done on <cite>self</cite> to <cite>obj</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.blink_stats" title="pypillometry.GenericEyeData.blink_stats"><code class="xref py py-obj docutils literal notranslate"><span class="pre">blink_stats</span></code></a>([eyes, units])</p></td>
<td><p>Return statistics on blink durations.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.blinks_merge_close" title="pypillometry.GenericEyeData.blinks_merge_close"><code class="xref py py-obj docutils literal notranslate"><span class="pre">blinks_merge_close</span></code></a>([eyes, variables, ...])</p></td>
<td><p>Merge blinks that are close together.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.copy" title="pypillometry.GenericEyeData.copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy</span></code></a>([new_name])</p></td>
<td><p>Make and return a deep-copy of the pupil data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.downsample" title="pypillometry.GenericEyeData.downsample"><code class="xref py py-obj docutils literal notranslate"><span class="pre">downsample</span></code></a>(fsd[, dsfac, inplace])</p></td>
<td><p>Simple downsampling scheme using mean within the downsampling window.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.drop_original" title="pypillometry.GenericEyeData.drop_original"><code class="xref py py-obj docutils literal notranslate"><span class="pre">drop_original</span></code></a>([inplace])</p></td>
<td><p>Drop original dataset from record (e.g., to save space).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.fill_time_discontinuities" title="pypillometry.GenericEyeData.fill_time_discontinuities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fill_time_discontinuities</span></code></a>([yval, print_info])</p></td>
<td><p>find gaps in the time-vector and fill them in (add zeros to the signal)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.from_eyelink" title="pypillometry.GenericEyeData.from_eyelink"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_eyelink</span></code></a>(fname[, return_edf_obj, ...])</p></td>
<td><p>Reads a <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code> object from an Eyelink file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.from_file" title="pypillometry.GenericEyeData.from_file"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_file</span></code></a>(fname)</p></td>
<td><p>Reads a <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code> object from a pickle-file.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.get_blinks" title="pypillometry.GenericEyeData.get_blinks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_blinks</span></code></a>([eyes, variables, units])</p></td>
<td><p>Get blinks as Intervals object or dict of Intervals.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.get_duration" title="pypillometry.GenericEyeData.get_duration"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_duration</span></code></a>([units])</p></td>
<td><p>Return duration of the dataset in units specified.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.get_events" title="pypillometry.GenericEyeData.get_events"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_events</span></code></a>([units])</p></td>
<td><p>Get events as an Events object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.get_intervals" title="pypillometry.GenericEyeData.get_intervals"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_intervals</span></code></a>(event_select[, interval, ...])</p></td>
<td><p>Return an Intervals object containing intervals relative to event-onsets.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.get_size" title="pypillometry.GenericEyeData.get_size"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_size</span></code></a>()</p></td>
<td><p>Return the size of the object in bytes.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.mask_as_intervals" title="pypillometry.GenericEyeData.mask_as_intervals"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mask_as_intervals</span></code></a>([eyes, variables, units, ...])</p></td>
<td><p>Convert masks to Intervals objects.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.mask_intervals" title="pypillometry.GenericEyeData.mask_intervals"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mask_intervals</span></code></a>(intervals[, eyes, variables, ...])</p></td>
<td><p>Apply Intervals as masks to selected data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.merge_eyes" title="pypillometry.GenericEyeData.merge_eyes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">merge_eyes</span></code></a>([eyes, variables, method, ...])</p></td>
<td><p>Merge data from both eyes into a single variable.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.merge_masks" title="pypillometry.GenericEyeData.merge_masks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">merge_masks</span></code></a>([inplace])</p></td>
<td><p>Merge masks of all variables into a single joint mask.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.nblinks" title="pypillometry.GenericEyeData.nblinks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nblinks</span></code></a>([eyes, variables])</p></td>
<td><p>Return number of detected blinks.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.nevents" title="pypillometry.GenericEyeData.nevents"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nevents</span></code></a>()</p></td>
<td><p>Return number of events in data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.print_history" title="pypillometry.GenericEyeData.print_history"><code class="xref py py-obj docutils literal notranslate"><span class="pre">print_history</span></code></a>()</p></td>
<td><p>Pretty-print the history of the current dataset (which manipulations where done on it).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.reset_time" title="pypillometry.GenericEyeData.reset_time"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset_time</span></code></a>([t0, inplace])</p></td>
<td><p>Resets time so that the time-array starts at time zero (t0).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.scale" title="pypillometry.GenericEyeData.scale"><code class="xref py py-obj docutils literal notranslate"><span class="pre">scale</span></code></a>([variables, mean, sd, eyes, inplace])</p></td>
<td><p>Scale the signal by subtracting <cite>mean</cite> and dividing by <cite>sd</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.set_blinks" title="pypillometry.GenericEyeData.set_blinks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_blinks</span></code></a>(intervals[, eyes, variables, ...])</p></td>
<td><p>Set blinks for specified eyes and variables.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.set_event_onsets" title="pypillometry.GenericEyeData.set_event_onsets"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_event_onsets</span></code></a>(event_onsets, event_labels)</p></td>
<td><p>Set onsets of events in the data</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.set_events" title="pypillometry.GenericEyeData.set_events"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_events</span></code></a>(events[, inplace])</p></td>
<td><p>Replace event onsets and labels from an Events object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.stat_per_event" title="pypillometry.GenericEyeData.stat_per_event"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stat_per_event</span></code></a>([intervals, interval, ...])</p></td>
<td><p>Return result of applying a statistical function to data in a given interval relative to event-onsets.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.sub_slice" title="pypillometry.GenericEyeData.sub_slice"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sub_slice</span></code></a>([start, end, units, inplace])</p></td>
<td><p>Return a new <cite>EyeData</cite> object that is a shortened version of the current one (contains all data between <cite>start</cite> and <cite>end</cite> in units given by <cite>units</cite> (one of &quot;ms&quot;, &quot;sec&quot;, &quot;min&quot;, &quot;h&quot;).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.summary" title="pypillometry.GenericEyeData.summary"><code class="xref py py-obj docutils literal notranslate"><span class="pre">summary</span></code></a>()</p></td>
<td><p>Return a summary of the <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code>-object.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.unscale" title="pypillometry.GenericEyeData.unscale"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unscale</span></code></a>([variables, mean, sd, eyes, inplace])</p></td>
<td><p>Scale back to original values using either values provided as arguments or the values stored in <cite>scale_params</cite>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.GenericEyeData.write_file" title="pypillometry.GenericEyeData.write_file"><code class="xref py py-obj docutils literal notranslate"><span class="pre">write_file</span></code></a>(fname)</p></td>
<td><p>Save to file (using <code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code>).</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.add_to_history">
<span class="sig-name descname"><span class="pre">add_to_history</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.add_to_history"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.add_to_history" title="Link to this definition">¶</a></dt>
<dd><p>Add event to history</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.apply_history">
<span class="sig-name descname"><span class="pre">apply_history</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.apply_history"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.apply_history" title="Link to this definition">¶</a></dt>
<dd><p>Apply history of operations done on <cite>self</cite> to <cite>obj</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>obj</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code>) – object of class <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code> to which the operations are to be transferred</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>copy of the <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code>-object to which the operations in <cite>self</cite> were applied</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.blink_stats">
<span class="sig-name descname"><span class="pre">blink_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ms'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.blink_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.blink_stats" title="Link to this definition">¶</a></dt>
<dd><p>Return statistics on blink durations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eyes</strong> (<em>list</em>) – Eyes to process. If empty, all eyes are processed.</p></li>
<li><p><strong>units</strong> (<em>str</em>) – Units for statistics: “ms”, “sec”, “min”, or “h”</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary mapping eye name to IntervalStats (or None if no blinks)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.blinks">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">blinks</span></span><a class="headerlink" href="#pypillometry.GenericEyeData.blinks" title="Link to this definition">¶</a></dt>
<dd><p>Return blinks (intervals) for all eyes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>dictionary with blinks for each eye</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.blinks_merge_close">
<span class="sig-name descname"><span class="pre">blinks_merge_close</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ms'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apply_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.blinks_merge_close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.blinks_merge_close" title="Link to this definition">¶</a></dt>
<dd><p>Merge blinks that are close together.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eyes</strong> (<em>list</em>) – Eyes to process. If empty, all eyes are processed.</p></li>
<li><p><strong>variables</strong> (<em>list</em>) – Variables to process. If empty, all variables are processed.</p></li>
<li><p><strong>distance</strong> (<em>float</em>) – Merge blinks closer than this distance (in units specified by <code class="docutils literal notranslate"><span class="pre">units</span></code>)</p></li>
<li><p><strong>units</strong> (<em>str</em>) – Units for <code class="docutils literal notranslate"><span class="pre">distance</span></code>. Can be “ms”, “sec”, “min”, or “h”. Default “ms”.</p></li>
<li><p><strong>apply_mask</strong> (<em>bool</em><em>, </em><em>default=True</em>) – If True, apply merged blinks as masks to the data and return self.
If False, return merged blinks as dict of Intervals objects without applying masks.</p></li>
<li><p><strong>inplace</strong> (<em>bool</em><em> or </em><em>None</em>) – If True, modify in place. If False, return copy.
Only relevant when apply_mask=True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If apply_mask=True: returns modified object for chaining.
If apply_mask=False: returns dict of Intervals objects (one per eye/variable combination).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pypillometry.GenericEyeData" title="pypillometry.GenericEyeData">GenericEyeData</a> or dict of Intervals</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.copy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.copy" title="Link to this definition">¶</a></dt>
<dd><p>Make and return a deep-copy of the pupil data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.downsample">
<span class="sig-name descname"><span class="pre">downsample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fsd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dsfac</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.downsample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.downsample" title="Link to this definition">¶</a></dt>
<dd><p>Simple downsampling scheme using mean within the downsampling window.</p>
<p>All data fields are downsampled simultaneously.
See <code class="xref py py-func docutils literal notranslate"><span class="pre">baseline.downsample()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fsd</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></span>) – new sampling-rate or decimate-factor</p></li>
<li><p><strong>dsfac</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span>) – if False, <cite>fsd</cite> is the new sampling rate;
if True, <cite>fsd</cite> is the decimate factor</p></li>
<li><p><strong>inplace</strong> (<em>bool</em>) – if <cite>True</cite>, make change in-place and return the object
if <cite>False</cite>, make and return copy before making changes</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.drop_original">
<span class="sig-name descname"><span class="pre">drop_original</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.drop_original"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.drop_original" title="Link to this definition">¶</a></dt>
<dd><p>Drop original dataset from record (e.g., to save space).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>inplace</strong> (<em>bool</em>) – if <cite>True</cite>, make change in-place and return the object
if <cite>False</cite>, make and return copy before making changes
if <cite>None</cite>, use the setting of the object (specified in constructor)</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.eyes">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">eyes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pypillometry.GenericEyeData.eyes" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of available eyes in the dataset.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.fill_time_discontinuities">
<span class="sig-name descname"><span class="pre">fill_time_discontinuities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">yval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.fill_time_discontinuities"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.fill_time_discontinuities" title="Link to this definition">¶</a></dt>
<dd><p>find gaps in the time-vector and fill them in
(add zeros to the signal)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.from_eyelink">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_eyelink</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_edf_obj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_eyelink_triggers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.from_eyelink"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.from_eyelink" title="Link to this definition">¶</a></dt>
<dd><p>Reads a <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code> object from an Eyelink file.</p>
<p>All “messages” are stored as event_labels (can be filtered later) and
it tries to be smart to detect different information from the EDF file.
Spatial calibration/validation data is automatically parsed and stored
in the <cite>calibration</cite> attribute as SpatialCalibration objects.</p>
<p>However, the EDF file may contain other information of interest, e.g.,
eyelink-detected saccades, etc.
If you need more control, use the “eyelinkio” package directly and
create the object manually.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<em>str</em>) – filename of the EDF file</p></li>
<li><p><strong>return_edf_obj</strong> (<em>bool</em>) – if True, return a tuple with the object of class <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code> and the object returned by the “eyelinkio” package
if False, return only the object of class <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code></p></li>
<li><p><strong>remove_eyelink_triggers</strong> (<em>bool</em>) – if True, remove all Eyelink triggers from the event_labels (related to eye-tracker settings, calibration, validation etc)</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – additional arguments to pass to the pypillometry.io.read_eyelink()</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>object of class <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code> or tuple with the object of class <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code> and the object returned by the “eyelinkio” package</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code> or tuple</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pypillometry</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">EyeData</span><span class="o">.</span><span class="n">from_eyelink</span><span class="p">(</span><span class="s1">&#39;data.edf&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Access calibration data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">calibration</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">])</span>
<span class="go">&lt;SpatialCalibration: left eye, HV9, n=9, error=0.45±0.23° (max=0.79°)&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.from_file">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.from_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.from_file" title="Link to this definition">¶</a></dt>
<dd><p>Reads a <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code> object from a pickle-file.
Use as <code class="docutils literal notranslate"><span class="pre">pypillometry.PupilData.from_file(&quot;yourfile.pd&quot;)</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fname</strong> (<em>str</em>) – filename</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.get_blinks">
<span class="sig-name descname"><span class="pre">get_blinks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.get_blinks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.get_blinks" title="Link to this definition">¶</a></dt>
<dd><p>Get blinks as Intervals object or dict of Intervals.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eyes</strong> (<em>str</em><em> or </em><em>list</em>) – Eye(s) to get blinks for. If multiple, returns dict.</p></li>
<li><p><strong>variables</strong> (<em>str</em><em> or </em><em>list</em>) – Variable(s) to get blinks for. If multiple, returns dict.</p></li>
<li><p><strong>units</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – Units for intervals: “ms”, “sec”, “min”, “h”, or None for indices</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If single eye and variable: returns Intervals object.
If multiple eyes/variables: returns dict with keys like “left_pupil”.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Intervals or dict</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">blinks</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_blinks</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;pupil&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blinks_ms</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_blinks</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;pupil&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s2">&quot;ms&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blinks_dict</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_blinks</span><span class="p">([</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">],</span> <span class="s1">&#39;pupil&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">indices</span> <span class="o">=</span> <span class="n">blinks_ms</span><span class="o">.</span><span class="n">as_index</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.get_duration">
<span class="sig-name descname"><span class="pre">get_duration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'min'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.get_duration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.get_duration" title="Link to this definition">¶</a></dt>
<dd><p>Return duration of the dataset in units specified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>units</strong> (<em>str</em><em>, </em><em>optional</em>) – unit one of “min”, “sec”, “h”, by default “min”</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>duration of dataset in specified units</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.get_events">
<span class="sig-name descname"><span class="pre">get_events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ms'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.get_events"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.get_events" title="Link to this definition">¶</a></dt>
<dd><p>Get events as an Events object.</p>
<p>Returns the event onsets and labels stored in the dataset as an
Events object, which provides convenient filtering and display capabilities.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>units</strong> (<em>str</em><em>, </em><em>optional</em>) – Units for the event onsets: “ms”, “sec”, “min”, or “h”.
Default is “ms” (the internal storage format).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Events object containing the event onsets and labels</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Events</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">events</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_events</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">events</span><span class="p">)</span>
<span class="go">42</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Get events in seconds</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">events_sec</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_events</span><span class="p">(</span><span class="n">units</span><span class="o">=</span><span class="s2">&quot;sec&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Filter and work with events</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stim_events</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_events</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s2">&quot;stim&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pypillometry.GenericEyeData.set_events" title="pypillometry.GenericEyeData.set_events"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_events</span></code></a></dt><dd><p>Replace events from an Events object</p>
</dd>
<dt><a class="reference internal" href="#pypillometry.GenericEyeData.get_intervals" title="pypillometry.GenericEyeData.get_intervals"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_intervals</span></code></a></dt><dd><p>Extract intervals around events</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.get_intervals">
<span class="sig-name descname"><span class="pre">get_intervals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_select</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(-200,</span> <span class="pre">200)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.get_intervals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.get_intervals" title="Link to this definition">¶</a></dt>
<dd><p>Return an Intervals object containing intervals relative to event-onsets.
For example, extract the interval before and after a stimulus has been presented.
It is possible to select based on the event label, e.g. only select
events matching “stimulus” or “response”. It is also
possible to select the intervals situated between two different events,
e.g., trial start and response by specifying <cite>event_select</cite> as a tuple
with two entriess.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_select</strong> (<em>str</em><em>, </em><em>tuple</em><em>, </em><em>function</em><em>, or </em><em>Events</em>) – <p>variable describing which events to select and align to
- if str: use all events whose label contains the string
- if function: apply function to all labels, use those where the function returns True
- if tuple: use all events between the two events specified in the tuple.</p>
<blockquote>
<div><p>Both selectors must result in identical number of events.</p>
</div></blockquote>
<ul>
<li><p>if Events: use the events from the Events object directly</p></li>
</ul>
</p></li>
<li><p><strong>interval</strong> (<em>tuple</em><em> (</em><em>min</em><em>,</em><em>max</em><em>)</em>) – time-window relative to event-onset (0 is event-onset); i.e., negative
numbers are before the event, positive numbers after. Units are defined
by the <cite>units</cite> parameter</p></li>
<li><p><strong>units</strong> (<em>str</em><em> or </em><em>None</em>) – units of the interval (one of “ms”, “sec”, “min”, “h”); units=None means
that the interval in sampling units (i.e., indices into the time-array)</p></li>
<li><p><strong>label</strong> (<em>str</em><em> or </em><em>None</em>) – optional label for the Intervals object. If None, a label is automatically
generated from the event_select parameter</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – passed onto the event_select function</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li></li>
<li><p><strong>result</strong> (<em>Intervals</em>) – Intervals object containing interval on- and offsets for each match,
with associated metadata (event labels, indices, units)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.get_size">
<span class="sig-name descname"><span class="pre">get_size</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.get_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.get_size" title="Link to this definition">¶</a></dt>
<dd><p>Return the size of the object in bytes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Total size of the object, including data and all attributes.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>ByteSize</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.mask_as_intervals">
<span class="sig-name descname"><span class="pre">mask_as_intervals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.mask_as_intervals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.mask_as_intervals" title="Link to this definition">¶</a></dt>
<dd><p>Convert masks to Intervals objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eyes</strong> (<em>str</em><em> or </em><em>list</em>) – Eye(s) to get masks for. If multiple, returns dict.</p></li>
<li><p><strong>variables</strong> (<em>str</em><em> or </em><em>list</em>) – Variable(s) to get masks for. If multiple, returns dict.</p></li>
<li><p><strong>units</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – Units for intervals: “ms”, “sec”, “min”, “h”, or None for indices.
Default is None (indices).</p></li>
<li><p><strong>label</strong> (<em>str</em><em>, </em><em>optional</em>) – Descriptive label for the intervals. Default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If single eye and variable: returns Intervals object.
If multiple eyes/variables: returns dict with keys like “left_pupil”.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Intervals or dict</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mask_intervals</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">mask_as_intervals</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;pupil&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask_ms</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">mask_as_intervals</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;pupil&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask_dict</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">mask_as_intervals</span><span class="p">([</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">],</span> <span class="s1">&#39;pupil&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.mask_intervals">
<span class="sig-name descname"><span class="pre">mask_intervals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">intervals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.mask_intervals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.mask_intervals" title="Link to this definition">¶</a></dt>
<dd><p>Apply Intervals as masks to selected data.</p>
<p>Takes detected intervals (e.g., blinks, artifacts) and applies them
as masks to specified eyes and variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>intervals</strong> (<em>Intervals</em><em> or </em><em>dict</em>) – <p>Either:
- A single Intervals object: applied to all specified eyes/variables
- A dict of Intervals: keys like “left_pupil”, “right_x”, etc.</p>
<blockquote>
<div><p>When dict is provided, <cite>eyes</cite> and <cite>variables</cite> are ignored.</p>
</div></blockquote>
</p></li>
<li><p><strong>eyes</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of eyes to apply mask to (e.g., [‘left’, ‘right’]).
If empty, applies to all available eyes.
Ignored if <cite>intervals</cite> is a dict.</p></li>
<li><p><strong>variables</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of variables to apply mask to (e.g., [‘pupil’, ‘x’, ‘y’]).
If empty, applies to all available variables.
Ignored if <cite>intervals</cite> is a dict.</p></li>
<li><p><strong>inplace</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, make change in-place and return the object.
If False, make and return copy before making changes.
If None, use the object’s default setting.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The object with masks applied.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pypillometry.GenericEyeData" title="pypillometry.GenericEyeData">GenericEyeData</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Apply blinks from a single Intervals object to left eye pupil data:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">blinks</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">pupil_blinks_detect</span><span class="p">(</span><span class="n">apply_mask</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">mask_intervals</span><span class="p">(</span><span class="n">blinks</span><span class="p">[</span><span class="s1">&#39;left_pupil&#39;</span><span class="p">],</span> <span class="n">eyes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">],</span> <span class="n">variables</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;pupil&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Apply a dict of intervals (one per eye/variable):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">blinks</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">pupil_blinks_detect</span><span class="p">(</span><span class="n">apply_mask</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">mask_intervals</span><span class="p">(</span><span class="n">blinks</span><span class="p">)</span>  <span class="c1"># eyes and variables ignored</span>
</pre></div>
</div>
<p>Chain with other operations:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">mask_intervals</span><span class="p">(</span><span class="n">blinks</span><span class="p">)</span><span class="o">.</span><span class="n">pupil_lowpass_filter</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">pupil_blinks_detect</span></code></dt><dd><p>Detect blinks with optional masking</p>
</dd>
<dt><a class="reference internal" href="#pypillometry.GenericEyeData.get_blinks" title="pypillometry.GenericEyeData.get_blinks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_blinks</span></code></a></dt><dd><p>Retrieve stored blink intervals</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.merge_eyes">
<span class="sig-name descname"><span class="pre">merge_eyes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.merge_eyes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.merge_eyes" title="Link to this definition">¶</a></dt>
<dd><p>Merge data from both eyes into a single variable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eyes</strong> (<em>list</em><em>, </em><em>optional</em>) – list of eyes to merge, by default [] meaning all eyes</p></li>
<li><p><strong>variables</strong> (<em>list</em><em>, </em><em>optional</em>) – list of variables to merge, by default [] meaning all variables</p></li>
<li><p><strong>method</strong> (<em>str</em><em>, </em><em>optional</em>) – which method to use for merging (one of “mean”, “regress”), by default “mean”</p></li>
<li><p><strong>keep_eyes</strong> (<em>bool</em><em>, </em><em>optional</em>) – keep original eye data or drop?, by default True</p></li>
<li><p><strong>inplace</strong> (<em>make change inplace</em><em>, </em><em>optional</em>) – if None, use default value in class, by default None</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.merge_masks">
<span class="sig-name descname"><span class="pre">merge_masks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.merge_masks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.merge_masks" title="Link to this definition">¶</a></dt>
<dd><p>Merge masks of all variables into a single joint mask.</p>
<p>This function creates a joint mask by taking the logical OR of all individual masks
using <cite>get_mask()</cite>, then applies this joint mask to all variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>inplace</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, make change in-place and return the object.
If False, make and return copy before making changes.
If None, use the object’s default setting.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The object with merged masks.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pypillometry.GenericEyeData" title="pypillometry.GenericEyeData">GenericEyeData</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.nblinks">
<span class="sig-name descname"><span class="pre">nblinks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.nblinks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.nblinks" title="Link to this definition">¶</a></dt>
<dd><p>Return number of detected blinks. Should be run after <cite>detect_blinks()</cite>.</p>
<p>By default, all eyes and variables are considered.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>eyes</strong> (<em>list</em>) – list of eyes to consider; if empty, all eyes are considered</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>number of detected blinks</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.nevents">
<span class="sig-name descname"><span class="pre">nevents</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.nevents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.nevents" title="Link to this definition">¶</a></dt>
<dd><p>Return number of events in data.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.params">
<span class="sig-name descname"><span class="pre">params</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></em><a class="headerlink" href="#pypillometry.GenericEyeData.params" title="Link to this definition">¶</a></dt>
<dd><p>Constructor</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.print_history">
<span class="sig-name descname"><span class="pre">print_history</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.print_history"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.print_history" title="Link to this definition">¶</a></dt>
<dd><p>Pretty-print the history of the current dataset (which manipulations where done on it).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.reset_time">
<span class="sig-name descname"><span class="pre">reset_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.reset_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.reset_time" title="Link to this definition">¶</a></dt>
<dd><p>Resets time so that the time-array starts at time zero (t0).
Resets onsets etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t0</strong> (<em>float</em><em> or </em><em>None</em>) – time at which the <a class="reference internal" href="#pypillometry.PupilData" title="pypillometry.PupilData"><code class="xref py py-class docutils literal notranslate"><span class="pre">PupilData</span></code></a>’s time-vector starts; if None, use the first time point</p></li>
<li><p><strong>inplace</strong> (<em>bool</em>) – if <cite>True</cite>, make change in-place and return the object
if <cite>False</cite>, make and return copy before making changes
if <cite>None</cite>, use the setting of the object (specified in constructor)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.scale">
<span class="sig-name descname"><span class="pre">scale</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mean</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.scale"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.scale" title="Link to this definition">¶</a></dt>
<dd><p>Scale the signal by subtracting <cite>mean</cite> and dividing by <cite>sd</cite>.
If these variables are not provided, use the signal’s mean and std.
Specify whether to scale <cite>x</cite>, <cite>y</cite>, <cite>pupil</cite> or other variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variables</strong> (<em>str</em><em> or </em><em>list</em>) – variables to scale; can be “pupil”, “x”,”y”, “baseline”, “response” or any other variable
that is available in the dataset; either a string or a list of strings;
available variables can be checked with <cite>obj.variables</cite>; empty list means all variables</p></li>
<li><p><strong>mean</strong> (<em>None</em><em>, </em><em>float</em><em> or </em><em>dict</em>) – mean to subtract from signal; if <cite>None</cite>, use the signal’s mean
if dict, provide mean for each eye and variable configuration</p></li>
<li><p><strong>sd</strong> (<em>None</em><em>, </em><em>float</em><em> or </em><em>dict</em>) – sd to scale with; if <cite>None</cite>, use the signal’s std
if dict, provide sd for each eye and variable configuration</p></li>
<li><p><strong>eyes</strong> (<em>str</em><em> or </em><em>list</em>) – list of eyes to consider; if empty, all available eyes are considered</p></li>
<li><p><strong>inplace</strong> (<em>bool</em>) – if <cite>True</cite>, make change in-place and return the object
if <cite>False</cite>, make and return copy before making changes
if <cite>None</cite>, use the object’s default setting</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Scaling-parameters are being saved in the <cite>params[“scale”]</cite> argument.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.set_blinks">
<span class="sig-name descname"><span class="pre">set_blinks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">intervals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apply_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.set_blinks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.set_blinks" title="Link to this definition">¶</a></dt>
<dd><p>Set blinks for specified eyes and variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>intervals</strong> (<em>Intervals</em><em> or </em><em>dict</em>) – <p>Either:
- A single Intervals object: stored for all specified eyes/variables
- A dict of Intervals: keys like “left_pupil”, “right_x”, etc.</p>
<blockquote>
<div><p>When dict is provided, <cite>eyes</cite> and <cite>variables</cite> are ignored.</p>
</div></blockquote>
</p></li>
<li><p><strong>eyes</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of eyes to set blinks for (e.g., [‘left’, ‘right’]).
If empty, applies to all available eyes.
Ignored if <cite>intervals</cite> is a dict.</p></li>
<li><p><strong>variables</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of variables to set blinks for (e.g., [‘pupil’, ‘x’, ‘y’]).
If empty, applies to all available variables.
Ignored if <cite>intervals</cite> is a dict.</p></li>
<li><p><strong>apply_mask</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, apply intervals as mask to data. If False, only store intervals.
Default is True.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.set_event_onsets">
<span class="sig-name descname"><span class="pre">set_event_onsets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_onsets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_labels</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.set_event_onsets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.set_event_onsets" title="Link to this definition">¶</a></dt>
<dd><p>Set onsets of events in the data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>onsets</strong> (<em>np.ndarray</em>) – array of onsets (in ms)</p></li>
<li><p><strong>labels</strong> (<em>np.ndarray</em>) – array of labels (strings)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.set_events">
<span class="sig-name descname"><span class="pre">set_events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">events</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.set_events"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.set_events" title="Link to this definition">¶</a></dt>
<dd><p>Replace event onsets and labels from an Events object.</p>
<p>This method updates the internal event_onsets and event_labels arrays
from an Events object. The Events object’s onsets are automatically
converted to milliseconds (the internal storage format) if needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>events</strong> (<em>Events</em>) – Events object containing the new events to set</p></li>
<li><p><strong>inplace</strong> (<em>bool</em><em>, </em><em>optional</em>) – if <cite>True</cite>, make change in-place and return the object
if <cite>False</cite>, make and return copy before making changes
if <cite>None</cite>, use the setting of the object (specified in constructor)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The object with updated events (may be self or a copy depending on inplace)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pypillometry.GenericEyeData" title="pypillometry.GenericEyeData">GenericEyeData</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Filter events and set them back</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">events</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_events</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stim_events</span> <span class="o">=</span> <span class="n">events</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s2">&quot;stim&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">set_events</span><span class="p">(</span><span class="n">stim_events</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Modify events and update</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">events</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_events</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># ... filter or modify events ...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">set_events</span><span class="p">(</span><span class="n">events</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#pypillometry.GenericEyeData.get_events" title="pypillometry.GenericEyeData.get_events"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_events</span></code></a></dt><dd><p>Get events as an Events object</p>
</dd>
<dt><a class="reference internal" href="#pypillometry.GenericEyeData.set_event_onsets" title="pypillometry.GenericEyeData.set_event_onsets"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_event_onsets</span></code></a></dt><dd><p>Lower-level method to set events from arrays</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.stat_per_event">
<span class="sig-name descname"><span class="pre">stat_per_event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">intervals=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interval=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_select=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eyes=[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables=[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statfct=&lt;function</span> <span class="pre">mean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units='ms'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.stat_per_event"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.stat_per_event" title="Link to this definition">¶</a></dt>
<dd><p>Return result of applying a statistical function to data in a
given interval relative to event-onsets. For example, extract mean
pupil-size in interval before trial onset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>intervals</strong> (<em>Intervals</em><em>, </em><em>optional</em>) – Intervals object to use. If provided, interval and event_select are ignored.</p></li>
<li><p><strong>interval</strong> (<em>tuple</em><em> (</em><em>min</em><em>,</em><em>max</em><em>)</em><em>, </em><em>optional</em>) – time-window in ms relative to event-onset (0 is event-onset).
Required if intervals is not provided.</p></li>
<li><p><strong>event_select</strong> (<em>str</em><em> or </em><em>function</em><em>, </em><em>optional</em>) – variable describing which events to select and align to
see <a class="reference internal" href="#pypillometry.GenericEyeData.get_intervals" title="pypillometry.GenericEyeData.get_intervals"><code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyeData.get_intervals()</span></code></a> for details.
Required if intervals is not provided.</p></li>
<li><p><strong>eyes</strong> (<em>str</em><em> or </em><em>list</em>) – list of eyes to consider; if empty, consider all</p></li>
<li><p><strong>variables</strong> (<em>str</em><em> or </em><em>list</em>) – list of variables to consider; if empty, consider all</p></li>
<li><p><strong>statfct</strong> (<em>function</em>) – function mapping np.array to a single number</p></li>
<li><p><strong>units</strong> (<em>str</em>) – units for interval parameter (if used)</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – passed onto the event_select function</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li></li>
<li><p><strong>result</strong> (<em>np.array or dict</em>) – number of event-onsets long result array; in case of multiple eyes/variables, a dict is returned</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.sub_slice">
<span class="sig-name descname"><span class="pre">sub_slice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.sub_slice"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.sub_slice" title="Link to this definition">¶</a></dt>
<dd><p>Return a new <cite>EyeData</cite> object that is a shortened version
of the current one (contains all data between <cite>start</cite> and
<cite>end</cite> in units given by <cite>units</cite> (one of “ms”, “sec”, “min”, “h”).
If units is <cite>None</cite>, use the units in the time vector.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<em>float</em>) – start for new dataset</p></li>
<li><p><strong>end</strong> (<em>float</em>) – end of new dataset</p></li>
<li><p><strong>units</strong> (<em>str</em>) – time units in which <cite>start</cite> and <cite>end</cite> are provided.
(one of “ms”, “sec”, “min”, “h”).
If units is <cite>None</cite>, use the units in the time vector.</p></li>
<li><p><strong>inplace</strong> (<em>bool</em>) – if <cite>True</cite>, make change in-place and return the object
if <cite>False</cite>, make and return copy before making changes
if <cite>None</cite>, use the setting of the object (specified in constructor)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.summary">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">summary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.summary" title="Link to this definition">¶</a></dt>
<dd><p>Return a summary of the <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericEyedata</span></code>-object.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.unscale">
<span class="sig-name descname"><span class="pre">unscale</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mean</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.unscale"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.unscale" title="Link to this definition">¶</a></dt>
<dd><p>Scale back to original values using either values provided as arguments
or the values stored in <cite>scale_params</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variables</strong> (<em>str</em><em> or </em><em>list</em>) – variables to scale; can be “pupil”, “x”,”y”, “baseline”, “response” or any other variable
that is available in the dataset; either a string or a list of strings;
available variables can be checked with <cite>obj.variables</cite></p></li>
<li><p><strong>eyes</strong> (<em>str</em><em> or </em><em>list</em>) – list of eyes to consider; if empty, all available eyes are considered</p></li>
<li><p><strong>mean</strong> (<em>None</em><em>, </em><em>float</em><em> or </em><em>dict</em>) – mean to subtract from signal; if <cite>None</cite>, use the signal’s mean
if dict, provide mean for each eye and variable configuration</p></li>
<li><p><strong>sd</strong> (<em>None</em><em>, </em><em>float</em><em> or </em><em>Parameters</em>) – sd to scale with; if <cite>None</cite>, use the signal’s std
if dict, provide sd for each eye and variable configuration</p></li>
<li><p><strong>inplace</strong> (<em>bool</em>) – if <cite>True</cite>, make change in-place and return the object
if <cite>False</cite>, make and return copy before making changes
if <cite>None</cite>, use the object’s default setting</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.variables">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">variables</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pypillometry.GenericEyeData.variables" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of available variables in the dataset.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.GenericEyeData.write_file">
<span class="sig-name descname"><span class="pre">write_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/generic.html#GenericEyeData.write_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.GenericEyeData.write_file" title="Link to this definition">¶</a></dt>
<dd><p>Save to file (using <code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fname</strong> (<em>str</em>) – filename</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="eyedatadict">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">EyeDataDict</a><a class="headerlink" href="#eyedatadict" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pypillometry.EyeDataDict">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pypillometry.</span></span><span class="sig-name descname"><span class="pre">EyeDataDict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/eyedatadict.html#EyeDataDict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.EyeDataDict" title="Link to this definition">¶</a></dt>
<dd><p>A dictionary that contains 1-dimensional ndarrays of equal length
and with the same datatype (float).
Drops empty entries (None or length-0 ndarrays).</p>
<p>Keys stored in this dictionary have the following shape:
(eye)_(variable) where eye can be any string identifier (e.g., “left”, “right”,
“mean”, “median”, “regress”, or any other custom identifier) and variable is any
string identifier (e.g., “x”, “y”, “pupil”, “baseline”, “response”, or any other
custom identifier).</p>
<p>The dictionary can be indexed by a string “eye_variable” or by a tuple
(“eye”, “variable”) like data[“left”,”x”] or data[“left_x”].</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference internal" href="#pypillometry.EyeDataDict.eyes" title="pypillometry.EyeDataDict.eyes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">eyes</span></code></a></dt><dd><p>List of all available eyes.</p>
</dd>
<dt><a class="reference internal" href="#pypillometry.EyeDataDict.variables" title="pypillometry.EyeDataDict.variables"><code class="xref py py-obj docutils literal notranslate"><span class="pre">variables</span></code></a></dt><dd><p>List of all available variables.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">clear</span></code>()</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.EyeDataDict.copy" title="pypillometry.EyeDataDict.copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy</span></code></a>()</p></td>
<td><p>Create a deep copy of the dictionary.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.EyeDataDict.count_masked" title="pypillometry.EyeDataDict.count_masked"><code class="xref py py-obj docutils literal notranslate"><span class="pre">count_masked</span></code></a>([per_key])</p></td>
<td><p>Count the number of missing values based on masks.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get</span></code>(k[,d])</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.EyeDataDict.get_available_eyes" title="pypillometry.EyeDataDict.get_available_eyes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_available_eyes</span></code></a>([variable])</p></td>
<td><p>Return a list of available eyes.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.EyeDataDict.get_available_variables" title="pypillometry.EyeDataDict.get_available_variables"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_available_variables</span></code></a>()</p></td>
<td><p>Return a list of available variables.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.EyeDataDict.get_eye" title="pypillometry.EyeDataDict.get_eye"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_eye</span></code></a>(eye)</p></td>
<td><p>Return a subset EyeDataDict with all variables for a given eye.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.EyeDataDict.get_mask" title="pypillometry.EyeDataDict.get_mask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_mask</span></code></a>([key])</p></td>
<td><p>Get mask for a specific key or joint mask across all keys.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.EyeDataDict.get_size" title="pypillometry.EyeDataDict.get_size"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_size</span></code></a>()</p></td>
<td><p>Return the size of the dictionary in bytes.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.EyeDataDict.get_variable" title="pypillometry.EyeDataDict.get_variable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_variable</span></code></a>(variable)</p></td>
<td><p>Return a subset EyeDataDict with all eyes for a given variable.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">items</span></code>()</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">keys</span></code>()</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">pop</span></code>(k[,d])</p></td>
<td><p>If key is not found, d is returned if given, otherwise KeyError is raised.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">popitem</span></code>()</p></td>
<td><p>as a 2-tuple; but raise KeyError if D is empty.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pypillometry.EyeDataDict.set_mask" title="pypillometry.EyeDataDict.set_mask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_mask</span></code></a>(key, mask)</p></td>
<td><p>Set mask for a specific key.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pypillometry.EyeDataDict.set_with_mask" title="pypillometry.EyeDataDict.set_with_mask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_with_mask</span></code></a>(key, value[, mask, preserve_mask])</p></td>
<td><p>Set data array with explicit mask control.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">setdefault</span></code>(k[,d])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">update</span></code>([E, ]**F)</p></td>
<td><p>If E present and has a .keys() method, does:     for k in E.keys(): D[k] = E[k] If E present and lacks .keys() method, does:     for (k, v) in E: D[k] = v In either case, this is followed by: for k, v in F.items(): D[k] = v</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">values</span></code>()</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.EyeDataDict.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/eyedatadict.html#EyeDataDict.copy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.EyeDataDict.copy" title="Link to this definition">¶</a></dt>
<dd><p>Create a deep copy of the dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#pypillometry.EyeDataDict" title="pypillometry.eyedata.eyedatadict.EyeDataDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">EyeDataDict</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.EyeDataDict.count_masked">
<span class="sig-name descname"><span class="pre">count_masked</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">per_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/eyedatadict.html#EyeDataDict.count_masked"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.EyeDataDict.count_masked" title="Link to this definition">¶</a></dt>
<dd><p>Count the number of missing values based on masks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>per_key</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, return a dictionary with counts per key.
If False, return maximum count across all keys.
Default is False.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If per_key is False, returns maximum number of missing values across all keys.
If per_key is True, returns a dictionary mapping keys to their missing value counts.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Union[int, Dict[str, int]]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">EyeDataDict</span><span class="p">(</span><span class="n">left_x</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">left_y</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">set_mask</span><span class="p">(</span><span class="s2">&quot;left_x&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># second value is missing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">set_mask</span><span class="p">(</span><span class="s2">&quot;left_y&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># first and last values are missing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">count_masked</span><span class="p">()</span>  <span class="c1"># max missing values</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">count_masked</span><span class="p">(</span><span class="n">per_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># missing values per key</span>
<span class="go">{&#39;left_x&#39;: 1, &#39;left_y&#39;: 2}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pypillometry.EyeDataDict.eyes">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">eyes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pypillometry.EyeDataDict.eyes" title="Link to this definition">¶</a></dt>
<dd><p>List of all available eyes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.EyeDataDict.get_available_eyes">
<span class="sig-name descname"><span class="pre">get_available_eyes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/eyedatadict.html#EyeDataDict.get_available_eyes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.EyeDataDict.get_available_eyes" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of available eyes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>variable</strong> (<em>str</em><em>, </em><em>optional</em>) – If specified, return only eyes for this variable.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.EyeDataDict.get_available_variables">
<span class="sig-name descname"><span class="pre">get_available_variables</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/eyedatadict.html#EyeDataDict.get_available_variables"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.EyeDataDict.get_available_variables" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of available variables.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.EyeDataDict.get_eye">
<span class="sig-name descname"><span class="pre">get_eye</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eye</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/eyedatadict.html#EyeDataDict.get_eye"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.EyeDataDict.get_eye" title="Link to this definition">¶</a></dt>
<dd><p>Return a subset EyeDataDict with all variables for a given eye.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>eye</strong> (<em>str</em>) – The eye to get data for (‘left’, ‘right’, ‘mean’, etc.)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A new EyeDataDict containing only data for the specified eye</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pypillometry.EyeDataDict" title="pypillometry.EyeDataDict">EyeDataDict</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">EyeDataDict</span><span class="p">(</span><span class="n">left_x</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">left_y</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">right_x</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">left_data</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get_eye</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">left_data</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="go">dict_keys([&#39;left_x&#39;, &#39;left_y&#39;])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.EyeDataDict.get_mask">
<span class="sig-name descname"><span class="pre">get_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/eyedatadict.html#EyeDataDict.get_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.EyeDataDict.get_mask" title="Link to this definition">¶</a></dt>
<dd><p>Get mask for a specific key or joint mask across all keys.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em><em>, </em><em>optional</em>) – Key to get mask for. If None, returns logical OR of all masks.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Mask array for specified key, or joint mask if no key given.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>NDArray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.EyeDataDict.get_size">
<span class="sig-name descname"><span class="pre">get_size</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/eyedatadict.html#EyeDataDict.get_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.EyeDataDict.get_size" title="Link to this definition">¶</a></dt>
<dd><p>Return the size of the dictionary in bytes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Total size in bytes.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>ByteSize</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.EyeDataDict.get_variable">
<span class="sig-name descname"><span class="pre">get_variable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variable</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/eyedatadict.html#EyeDataDict.get_variable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.EyeDataDict.get_variable" title="Link to this definition">¶</a></dt>
<dd><p>Return a subset EyeDataDict with all eyes for a given variable.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.EyeDataDict.set_mask">
<span class="sig-name descname"><span class="pre">set_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/eyedatadict.html#EyeDataDict.set_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.EyeDataDict.set_mask" title="Link to this definition">¶</a></dt>
<dd><p>Set mask for a specific key.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypillometry.EyeDataDict.set_with_mask">
<span class="sig-name descname"><span class="pre">set_with_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preserve_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/eyedata/eyedatadict.html#EyeDataDict.set_with_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.EyeDataDict.set_with_mask" title="Link to this definition">¶</a></dt>
<dd><p>Set data array with explicit mask control.</p>
<p>This method provides more control over mask handling than __setitem__,
which always resets the mask to zeros (except for NaN values).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em><em> or </em><em>tuple</em>) – Dictionary key for the data (e.g., “left_pupil” or (“left”, “pupil”))</p></li>
<li><p><strong>value</strong> (<em>NDArray</em>) – Data array to store</p></li>
<li><p><strong>mask</strong> (<em>NDArray</em><em>, </em><em>optional</em>) – Mask array to use. If None and preserve_mask=True, keeps existing mask.
If None and preserve_mask=False, creates new zero mask (with NaNs masked).</p></li>
<li><p><strong>preserve_mask</strong> (<em>bool</em><em>, </em><em>default False</em>) – If True and mask is None, preserve the existing mask for this key.
Ignored if mask is explicitly provided.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Set data and preserve existing mask</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="o">.</span><span class="n">set_with_mask</span><span class="p">(</span><span class="s2">&quot;left_pupil&quot;</span><span class="p">,</span> <span class="n">new_values</span><span class="p">,</span> <span class="n">preserve_mask</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Set data with explicit mask</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="o">.</span><span class="n">set_with_mask</span><span class="p">(</span><span class="s2">&quot;left_pupil&quot;</span><span class="p">,</span> <span class="n">new_values</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">new_mask</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Set data with fresh zero mask (same as __setitem__)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_dict</span><span class="o">.</span><span class="n">set_with_mask</span><span class="p">(</span><span class="s2">&quot;left_pupil&quot;</span><span class="p">,</span> <span class="n">new_values</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pypillometry.EyeDataDict.variables">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">variables</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pypillometry.EyeDataDict.variables" title="Link to this definition">¶</a></dt>
<dd><p>List of all available variables.</p>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="stateless-signal-processing-functions">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Stateless signal-processing functions</a><a class="headerlink" href="#stateless-signal-processing-functions" title="Link to this heading">¶</a></h2>
<p>These functions are used by the main classes to process the data. They are stateless, meaning that they do not store any state between calls.</p>
<section id="baseline-py">
<span id="module-pypillometry.signal.baseline"></span><h3><a class="toc-backref" href="#id12" role="doc-backlink">baseline.py</a><a class="headerlink" href="#baseline-py" title="Link to this heading">¶</a></h3>
<p>Functions for estimating tonic pupillary fluctuations (baseline).</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="pypillometry.signal.baseline.baseline_envelope">
<span class="sig-prename descclassname"><span class="pre">pypillometry.signal.baseline.</span></span><span class="sig-name descname"><span class="pre">baseline_envelope</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_onsets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prominence_thr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">80</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interp_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cubic'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/signal/baseline.html#baseline_envelope"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.signal.baseline.baseline_envelope" title="Link to this definition">¶</a></dt>
<dd><p>Extract baseline based on the lower envelope of the (filtered) signal.</p>
<p>Steps:</p>
<ul class="simple">
<li><p>filter away noise</p></li>
<li><p>detect high-prominence throughs in the signal</p></li>
<li><p>calculate lower envelope based on these peaks</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tx</strong> (<em>np.ndarray</em>) – time-vector in seconds</p></li>
<li><p><strong>sy</strong> (<em>np.ndarray</em>) – raw pupil signal</p></li>
<li><p><strong>event_onsets</strong> (<em>list</em>) – onsets of events (stimuli/responses) in seconds</p></li>
<li><p><strong>fs</strong> (<em>float</em>) – sampling rate in Hz</p></li>
<li><p><strong>lp</strong> (<em>float</em>) – low-pass filter cutoff for removing random noise</p></li>
<li><p><strong>prominence_thr</strong> (<em>float in</em><em> [</em><em>0</em><em>,</em><em>100</em><em>]</em>) – percentile of the prominence distribution (of the peaks) to
use for determining prominent peaks (see <cite>scipy.stats.peak_prominences()</cite>)</p></li>
<li><p><strong>interp_method</strong> (<em>string</em><em>, </em><em>one</em><em> of </em><em>[</em><em>&quot;linear&quot;</em><em>, </em><em>&quot;cubic&quot;</em><em>, </em><em>&quot;spline&quot;</em><em>]</em>) – <p>“linear” - linear interpolation between the high-prominence peaks
“cubic”  - cubic interpolation through all high-prominence peaks
“spline” - a smoothing spline that is guaranteed to go through all</p>
<blockquote>
<div><p>high-prominence peaks and smoothes through all the other
(lower-prominence) peaks</p>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li></li>
<li><p><strong>base</strong> (<em>np.array</em>) – baseline estimate</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypillometry.signal.baseline.baseline_envelope_iter_bspline">
<span class="sig-prename descclassname"><span class="pre">pypillometry.signal.baseline.</span></span><span class="sig-name descname"><span class="pre">baseline_envelope_iter_bspline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_onsets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fsd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lam_sig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lam_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lam_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/signal/baseline.html#baseline_envelope_iter_bspline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.signal.baseline.baseline_envelope_iter_bspline" title="Link to this definition">¶</a></dt>
<dd><p>Extract baseline based (re-)estimating the lower envelope using B-splines.
See notebook <cite>baseline_interp.ipynb</cite> for details.
The signal is downsampled (to <cite>fsd</cite> Hz) for speed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tx</strong> (<em>np.ndarray</em>) – time-vector in seconds</p></li>
<li><p><strong>sy</strong> (<em>np.ndarray</em>) – raw pupil signal</p></li>
<li><p><strong>event_onsets</strong> (<em>list</em>) – onsets of events (stimuli/responses) in milliseconds</p></li>
<li><p><strong>fs</strong> (<em>float</em>) – sampling rate in Hz</p></li>
<li><p><strong>fsd</strong> (<em>float</em>) – downsampled sampling rate (if too slow, decrease)</p></li>
<li><p><strong>lp</strong> (<em>float</em>) – lowpass-filter cutoff (Hz)</p></li>
<li><p><strong>lam_sig</strong> (<em>float</em>) – parameter steering how much the baseline is shaped by the non-peaks of the signal</p></li>
<li><p><strong>lam_min</strong> (<em>float</em>) – parameters mapping how much low- and high-prominence peaks influence the baseline</p></li>
<li><p><strong>lam_max</strong> (<em>float</em>) – parameters mapping how much low- and high-prominence peaks influence the baseline</p></li>
<li><p><strong>verbose</strong> (<em>int</em><em> [</em><em>0</em><em>, </em><em>100</em><em>]</em>) – how much information to print (0 nothing, 100 everything)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li></li>
<li><p><strong>(txd,syd,base2,base1)</strong> (<em>tuple</em>) – txd: downsampled time-array
syd: downsampled and lowpass-filtered pupil signal
base1: is the estimated base after the first round
base2: is the final baseline estimate</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypillometry.signal.baseline.baseline_pupil_model">
<span class="sig-prename descclassname"><span class="pre">pypillometry.signal.baseline.</span></span><span class="sig-name descname"><span class="pre">baseline_pupil_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_onsets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lp1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lp2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/signal/baseline.html#baseline_pupil_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.signal.baseline.baseline_pupil_model" title="Link to this definition">¶</a></dt>
<dd><p>Extract baseline based on filtering after removing stim-locked activity.</p>
<p>Steps:</p>
<ul class="simple">
<li><p>filter away noise</p></li>
<li><p>regress out event-locked activity from the filtered signal using NNLS</p></li>
<li><p>remove modeled signal from filtered data</p></li>
<li><p>run another lowpass-filter to get rid of spurious signals</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tx</strong> (<em>np.ndarray</em>) – time-vector in seconds</p></li>
<li><p><strong>sy</strong> (<em>np.ndarray</em>) – raw pupil signal</p></li>
<li><p><strong>event_onsets</strong> (<em>list</em>) – onsets of events (stimuli/responses) in seconds</p></li>
<li><p><strong>fs</strong> (<em>float</em>) – sampling rate in Hz</p></li>
<li><p><strong>lp1</strong> (<em>float</em>) – low-pass filter cutoff for removing random noise</p></li>
<li><p><strong>lp2</strong> (<em>float</em>) – low-pass filter cutoff for removing spurious peaks from the baseline-signal</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li></li>
<li><p><strong>base</strong> (<em>np.array</em>) – baseline estimate</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypillometry.signal.baseline.bspline">
<span class="sig-prename descclassname"><span class="pre">pypillometry.signal.baseline.</span></span><span class="sig-name descname"><span class="pre">bspline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">txd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">knots</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spline_degree</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/signal/baseline.html#bspline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.signal.baseline.bspline" title="Link to this definition">¶</a></dt>
<dd><p>Re-implementation from <a class="reference external" href="https://mc-stan.org/users/documentation/case-studies/splines_in_stan.html">https://mc-stan.org/users/documentation/case-studies/splines_in_stan.html</a>.
Similar behaviour as R’s bs() function from the splines-library.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>txd</strong> (<em>np.array</em>) – time-vector</p></li>
<li><p><strong>knots</strong> (<em>np.array</em>) – location of the knots</p></li>
<li><p><strong>spline_degree</strong> (<em>int</em>) – degree of the spline</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li></li>
<li><p><strong>B</strong> (<em>np.array</em>) – matrix of basis functions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypillometry.signal.baseline.butter_lowpass">
<span class="sig-prename descclassname"><span class="pre">pypillometry.signal.baseline.</span></span><span class="sig-name descname"><span class="pre">butter_lowpass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cutoff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/signal/baseline.html#butter_lowpass"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.signal.baseline.butter_lowpass" title="Link to this definition">¶</a></dt>
<dd><p>Get lowpass-filter coefficients for Butterworth-filter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cutoff</strong> (<em>float</em>) – lowpass-filter cutoff</p></li>
<li><p><strong>fs</strong> (<em>float</em>) – sampling rate</p></li>
<li><p><strong>order</strong> (<em>int</em>) – filter order</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li></li>
<li><p><strong>(b,a)</strong> (<em>tuple (float,float)</em>) – filter coefficients</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypillometry.signal.baseline.butter_lowpass_filter">
<span class="sig-prename descclassname"><span class="pre">pypillometry.signal.baseline.</span></span><span class="sig-name descname"><span class="pre">butter_lowpass_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/signal/baseline.html#butter_lowpass_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.signal.baseline.butter_lowpass_filter" title="Link to this definition">¶</a></dt>
<dd><p>Lowpass-filter signal using a Butterworth-filter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.array</em>) – data to lowpass-filter</p></li>
<li><p><strong>cutoff</strong> (<em>float</em>) – lowpass-filter cutoff</p></li>
<li><p><strong>fs</strong> (<em>float</em>) – sampling rate</p></li>
<li><p><strong>order</strong> (<em>int</em>) – filter order</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li></li>
<li><p><strong>y</strong> (<em>np.array</em>) – filtered data</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypillometry.signal.baseline.downsample">
<span class="sig-prename descclassname"><span class="pre">pypillometry.signal.baseline.</span></span><span class="sig-name descname"><span class="pre">downsample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">R</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/signal/baseline.html#downsample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.signal.baseline.downsample" title="Link to this definition">¶</a></dt>
<dd><p>Simple downsampling scheme using mean within the downsampling window.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>y</strong> (<em>np.array</em>) – signal to downsample</p></li>
<li><p><strong>R</strong> (<em>int</em>) – decimate-factor</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li></li>
<li><p><strong>y</strong> (<em>np.array</em>) – downsampled data</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="logging">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Logging</a><a class="headerlink" href="#logging" title="Link to this heading">¶</a></h2>
<p>By default, the log-level is set to <cite>INFO</cite> which results in a moderate amount of logging information.
The logging can be turned off by running <a class="reference internal" href="#pypillometry.logging_disable" title="pypillometry.logging_disable"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging_disable()</span></code></a> and turned back on by running <a class="reference internal" href="#pypillometry.logging_enable" title="pypillometry.logging_enable"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging_enable()</span></code></a>.
You can also set the log-level to <cite>DEBUG</cite> or <cite>WARN</cite> by running <a class="reference internal" href="#pypillometry.logging_set_level" title="pypillometry.logging_set_level"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging_set_level()</span></code></a>.</p>
<dl class="py function">
<dt class="sig sig-object py" id="pypillometry.logging_set_level">
<span class="sig-prename descclassname"><span class="pre">pypillometry.</span></span><span class="sig-name descname"><span class="pre">logging_set_level</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'INFO'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/logging.html#logging_set_level"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.logging_set_level" title="Link to this definition">¶</a></dt>
<dd><p>Set the logging level for all pypillometry submodules.</p>
<p>In the case of DEBUG, the logging for cmdstanpy is also enabled.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>level</strong> (<em>str</em>) – The logging level. Can be one of “DEBUG”, “INFO”, “WARNING”, “ERROR”, “CRITICAL”.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypillometry.logging_disable">
<span class="sig-prename descclassname"><span class="pre">pypillometry.</span></span><span class="sig-name descname"><span class="pre">logging_disable</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/logging.html#logging_disable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.logging_disable" title="Link to this definition">¶</a></dt>
<dd><p>Disable logging for all pypillometry submodules.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypillometry.logging_enable">
<span class="sig-prename descclassname"><span class="pre">pypillometry.</span></span><span class="sig-name descname"><span class="pre">logging_enable</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/logging.html#logging_enable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.logging_enable" title="Link to this definition">¶</a></dt>
<dd><p>Enable logging for all pypillometry submodules.</p>
</dd></dl>

</section>
<section id="module-pypillometry.io">
<span id="modules"></span><h2><a class="toc-backref" href="#id14" role="doc-backlink">Modules</a><a class="headerlink" href="#module-pypillometry.io" title="Link to this heading">¶</a></h2>
<section id="io-py">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">io.py</a><a class="headerlink" href="#io-py" title="Link to this heading">¶</a></h3>
<p>Read/Write data from/to disk.</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="pypillometry.io.load_study_local">
<span class="sig-prename descclassname"><span class="pre">pypillometry.io.</span></span><span class="sig-name descname"><span class="pre">load_study_local</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pypillometry_conf.py'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subjects</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/io.html#load_study_local"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.io.load_study_local" title="Link to this definition">¶</a></dt>
<dd><p>Read a study from a local directory using the configuration file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – Local path where the study data is stored</p></li>
<li><p><strong>config_file</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of the configuration file. Default is “pypillometry_conf.py”</p></li>
<li><p><strong>subjects</strong> (<em>list</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – List of subject IDs to load. If None, all subjects will be loaded.
If a subject ID is provided that doesn’t exist in the data, it will be skipped.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>study_data</strong> (<em>dict</em>) – Dictionary containing the loaded study data</p></li>
<li><p><strong>config</strong> (<em>module</em>) – Module containing the configuration (pypillometry_conf.py imported as a module)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypillometry.io.load_study_osf">
<span class="sig-prename descclassname"><span class="pre">pypillometry.io.</span></span><span class="sig-name descname"><span class="pre">load_study_osf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">osf_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subjects</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_download</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pypillometry_conf.py'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/io.html#load_study_osf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.io.load_study_osf" title="Link to this definition">¶</a></dt>
<dd><p>Read a study from OSF using the configuration file.
Example: <a class="reference external" href="https://osf.io/p2u74/">https://osf.io/p2u74/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>osf_id</strong> (<em>str</em>) – The OSF project ID</p></li>
<li><p><strong>path</strong> (<em>str</em>) – Local path where files should be downloaded/stored</p></li>
<li><p><strong>subjects</strong> (<em>list</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – List of subject IDs to load. If None, all subjects will be loaded.
If a subject ID is provided that doesn’t exist in the data, it will be skipped.</p></li>
<li><p><strong>force_download</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, force re-download even if files exist locally. Default False.</p></li>
<li><p><strong>config_file</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of the configuration file. Default is “pypillometry_conf.py”</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>study_data</strong> (<em>dict</em>) – Dictionary containing the loaded study data</p></li>
<li><p><strong>config</strong> (<em>module</em>) – Module containing the configuration (pypillometry_conf.py imported as a module)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypillometry.io.osf_authenticate">
<span class="sig-prename descclassname"><span class="pre">pypillometry.io.</span></span><span class="sig-name descname"><span class="pre">osf_authenticate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">access_token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/io.html#osf_authenticate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.io.osf_authenticate" title="Link to this definition">¶</a></dt>
<dd><p>Authenticate against the OSF API using a personal access token.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>access_token</strong> (<em>str</em>) – Personal access token generated on OSF.</p></li>
<li><p><strong>validate</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True (default), verify the token by calling <code class="docutils literal notranslate"><span class="pre">/v2/users/me/</span></code>.</p></li>
<li><p><strong>session</strong> (<em>requests.Session</em><em>, </em><em>optional</em>) – Existing session to configure. If None, a new session is created.</p></li>
<li><p><strong>timeout</strong> (<em>float</em><em>, </em><em>optional</em>) – Timeout (in seconds) for the validation request when <code class="docutils literal notranslate"><span class="pre">validate</span></code> is True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Session configured with the OSF bearer token.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>requests.Session</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If no access token is provided or validation fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypillometry.io.read_eyelink">
<span class="sig-prename descclassname"><span class="pre">pypillometry.io.</span></span><span class="sig-name descname"><span class="pre">read_eyelink</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_download</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/io.html#read_eyelink"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.io.read_eyelink" title="Link to this definition">¶</a></dt>
<dd><p>Read an Eyelink file/URL and return the object returned by the “eyelinkio” package.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<em>str</em>) – filename of the Eyelink file or URL</p></li>
<li><p><strong>cache_file</strong> (<em>str</em><em>, </em><em>optional</em>) – filename to cache the file in case it is downloaded from a URL</p></li>
<li><p><strong>force_download</strong> (<em>bool</em><em>, </em><em>optional</em>) – if True, force re-download even if file exists locally</p></li>
<li><p><strong>session</strong> (<em>requests.Session</em><em>, </em><em>optional</em>) – requests session to use for the download.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>object returned by the “eyelinkio” package</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypillometry.io.write_pickle">
<span class="sig-prename descclassname"><span class="pre">pypillometry.io.</span></span><span class="sig-name descname"><span class="pre">write_pickle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/io.html#write_pickle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.io.write_pickle" title="Link to this definition">¶</a></dt>
<dd><p>Store any Python object in a file using <code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<em>object</em>) – object to save</p></li>
<li><p><strong>fname</strong> (<em>str</em>) – filename to save to</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<section id="example-data-py">
<span id="module-pypillometry.example_data"></span><h3><a class="toc-backref" href="#id16" role="doc-backlink">example_data.py</a><a class="headerlink" href="#example-data-py" title="Link to this heading">¶</a></h3>
<p>Example datasets for pypillometry.</p>
<p>This module provides example datasets for pypillometry. The datasets are
used in the documentation and for testing purposes. Most of them are stored on
OSF: <a class="reference external" href="https://osf.io/p2u74/">https://osf.io/p2u74/</a></p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="pypillometry.example_data.get_available_datasets">
<span class="sig-prename descclassname"><span class="pre">pypillometry.example_data.</span></span><span class="sig-name descname"><span class="pre">get_available_datasets</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/example_data.html#get_available_datasets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.example_data.get_available_datasets" title="Link to this definition">¶</a></dt>
<dd><p>Return available example datasets.</p>
<p>Returns a dictionary that displays as a nicely formatted pandas DataFrame
in Jupyter notebooks but can be used as a normal dict otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A dictionary (subclass of dict) containing all dataset metadata.
When displayed in Jupyter, it will render as a pandas DataFrame
with columns for Dataset name, Type, and Description.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>DatasetDict</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datasets</span> <span class="o">=</span> <span class="n">get_available_datasets</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># In Jupyter, this displays as a nice DataFrame</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">datasets</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># But you can still use it like a normal dict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">datasets</span><span class="p">[</span><span class="s1">&#39;rlmw_002&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypillometry.example_data.get_example_data">
<span class="sig-prename descclassname"><span class="pre">pypillometry.example_data.</span></span><span class="sig-name descname"><span class="pre">get_example_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypillometry/example_data.html#get_example_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypillometry.example_data.get_example_data" title="Link to this definition">¶</a></dt>
<dd><p>Load example data for a given example (see <cite>example_datasets</cite>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em>) – Key of the example dataset. Available keys are in the dictionary
<cite>example_datasets</cite>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The example dataset as an EyeData, GazeData or PupilData object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pypillometry.EyeData" title="pypillometry.EyeData">EyeData</a>, <a class="reference internal" href="#pypillometry.GazeData" title="pypillometry.GazeData">GazeData</a> or <a class="reference internal" href="#pypillometry.PupilData" title="pypillometry.PupilData">PupilData</a></p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Link to this heading">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/pypillometry_logo_200x200.png" alt="Logo of pypillometry"/>
            </a></p>
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">API documentation</a><ul>
<li><a class="reference internal" href="#unit-handling">Unit Handling:</a></li>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#primary-classes">Primary classes</a><ul>
<li><a class="reference internal" href="#eyedata">EyeData</a></li>
<li><a class="reference internal" href="#pupildata">PupilData</a></li>
<li><a class="reference internal" href="#gazedata">GazeData</a></li>
</ul>
</li>
<li><a class="reference internal" href="#plotting">Plotting</a></li>
<li><a class="reference internal" href="#supporting-classes">Supporting classes</a><ul>
<li><a class="reference internal" href="#genericeyedata">GenericEyeData</a></li>
<li><a class="reference internal" href="#eyedatadict">EyeDataDict</a></li>
</ul>
</li>
<li><a class="reference internal" href="#stateless-signal-processing-functions">Stateless signal-processing functions</a><ul>
<li><a class="reference internal" href="#baseline-py">baseline.py</a></li>
</ul>
</li>
<li><a class="reference internal" href="#logging">Logging</a></li>
<li><a class="reference internal" href="#module-pypillometry.io">Modules</a><ul>
<li><a class="reference internal" href="#io-py">io.py</a></li>
<li><a class="reference internal" href="#example-data-py">example_data.py</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="examples/share_study.html"
                          title="previous chapter">Sharing/Importing study data</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="dev.html"
                          title="next chapter">Developers</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/api.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dev.html" title="Developers"
             >next</a> |</li>
        <li class="right" >
          <a href="examples/share_study.html" title="Sharing/Importing study data"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pypillometry  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">API documentation</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2020-2025, Matthias Mittner.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    </div>
  </body>
</html>